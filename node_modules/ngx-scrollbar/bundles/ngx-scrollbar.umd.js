(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/cdk/platform'), require('rxjs'), require('@angular/cdk/scrolling'), require('@angular/cdk/layout'), require('rxjs/operators'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ngx-scrollbar', ['exports', '@angular/core', '@angular/cdk/platform', 'rxjs', '@angular/cdk/scrolling', '@angular/cdk/layout', 'rxjs/operators', '@angular/common'], factory) :
    (factory((global['ngx-scrollbar'] = {}),global.ng.core,global.ng.cdk.platform,global.rxjs,global.ng.cdk.scrolling,global.ng.cdk.layout,global.rxjs.operators,global.ng.common));
}(this, (function (exports,core,platform,rxjs,scrolling,layout,operators,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SmoothScroll = /** @class */ (function () {
        function SmoothScroll(el) {
            this.view = el.nativeElement;
        }
        /**
         * @param {?} left
         * @param {?} top
         * @return {?}
         */
        SmoothScroll.prototype.scrollFunc = /**
         * @param {?} left
         * @param {?} top
         * @return {?}
         */
            function (left, top) {
                if (platform.supportsScrollBehavior()) {
                    this.view.scrollTo({ top: top, left: left });
                }
                else {
                    this.view.scrollTop = top;
                    this.view.scrollLeft = left;
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        SmoothScroll.prototype.scrollTo = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                var _this = this;
                /** @type {?} */
                var scrollFunc = function (left, top) {
                    if (platform.supportsScrollBehavior()) {
                        _this.view.scrollTo({ top: top, left: left });
                    }
                    else {
                        _this.view.scrollTop = top;
                        _this.view.scrollLeft = left;
                    }
                };
                if (options.duration) {
                    /** @type {?} */
                    var smoothScrollOptions = {
                        top: options.top,
                        left: options.left,
                        duration: options.duration,
                        easeFunc: options.easeFunc || easeInOutQuad,
                        offsetTop: this.view.scrollTop,
                        offsetLeft: this.view.scrollLeft,
                        scrollFunc: scrollFunc
                    };
                    return rxjs.from(smoothScroll(smoothScrollOptions));
                }
                this.scrollFunc(options.left, options.top);
                return rxjs.of();
            };
        /**
         * @param {?} selector
         * @param {?=} offset
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollToElement = /**
         * @param {?} selector
         * @param {?=} offset
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (selector, offset, duration, easeFunc) {
                if (offset === void 0) {
                    offset = 0;
                }
                /** @type {?} */
                var target = this.view.querySelector(selector);
                return target ? this.scrollTo({ left: target.offsetLeft, top: target.offsetTop - offset, duration: duration, easeFunc: easeFunc }) : rxjs.of();
            };
        /**
         * @param {?} left
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollXTo = /**
         * @param {?} left
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (left, duration, easeFunc) {
                return this.scrollTo({ left: left, duration: duration, easeFunc: easeFunc });
            };
        /**
         * @param {?} top
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollYTo = /**
         * @param {?} top
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (top, duration, easeFunc) {
                return this.scrollTo({ top: top, duration: duration, easeFunc: easeFunc });
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollToTop = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.scrollYTo(0, duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollToBottom = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.scrollYTo(this.view.scrollHeight, duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollToRight = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.scrollXTo(this.view.scrollWidth, duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        SmoothScroll.prototype.scrollToLeft = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.scrollXTo(0, duration, easeFunc);
            };
        SmoothScroll.decorators = [
            { type: core.Directive, args: [{
                        selector: '[smoothScroll], [smooth-scroll]'
                    },] }
        ];
        /** @nocollapse */
        SmoothScroll.ctorParameters = function () {
            return [
                { type: core.ElementRef }
            ];
        };
        return SmoothScroll;
    }());
    /**
     * @param {?} options
     * @return {?}
     */
    function smoothScroll(options) {
        return new Promise(function (resolve) {
            /** @type {?} */
            var currentTime = 0;
            /** @type {?} */
            var increment = 20;
            /** @type {?} */
            var valX = options.offsetLeft;
            /** @type {?} */
            var valY = options.offsetTop;
            /** @type {?} */
            var animateScroll = function () {
                // increment the time
                currentTime += increment;
                // find the value with the easing function
                if (typeof options.left !== 'undefined') {
                    /** @type {?} */
                    var deltaX = options.left - options.offsetLeft;
                    valX = options.easeFunc(currentTime, options.offsetLeft, deltaX, options.duration);
                }
                if (typeof options.top !== 'undefined') {
                    /** @type {?} */
                    var deltaY = options.top - options.offsetTop;
                    valY = options.easeFunc(currentTime, options.offsetTop, deltaY, options.duration);
                }
                // scroll to position
                options.scrollFunc(valX, valY);
                // do the animation unless its over
                if (currentTime < options.duration) {
                    rxjs.animationFrameScheduler.schedule(animateScroll);
                }
                else {
                    resolve();
                }
            };
            animateScroll();
        });
    }
    /**
     * @param {?} t
     * @param {?} b
     * @param {?} c
     * @param {?} d
     * @return {?}
     */
    function easeInOutQuad(t, b, c, d) {
        t /= d / 2;
        if (t < 1) {
            return (c / 2) * t * t + b;
        }
        t--;
        return (-c / 2) * (t * (t - 2) - 1) + b;
    }
    /**
     * @param {?} t
     * @param {?} b
     * @param {?} c
     * @param {?} d
     * @return {?}
     */
    function easeInCubic(t, b, c, d) {
        /** @type {?} */
        var tc = (t /= d) * t * t;
        return b + c * tc;
    }
    /**
     * @param {?} t
     * @param {?} b
     * @param {?} c
     * @param {?} d
     * @return {?}
     */
    function inOutQuintic(t, b, c, d) {
        /** @type {?} */
        var ts = (t /= d) * t;
        /** @type {?} */
        var tc = ts * t;
        return b + c * (6 * tc * ts + -15 * ts * ts + 10 * tc);
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SmoothScrollModule = /** @class */ (function () {
        function SmoothScrollModule() {
        }
        SmoothScrollModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [scrolling.ScrollingModule],
                        declarations: [SmoothScroll],
                        exports: [SmoothScroll]
                    },] }
        ];
        return SmoothScrollModule;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultState = {
        viewStyle: {
            paddingRight: '0',
            paddingBottom: '0',
        },
        displayX: false,
        displayY: false
    };
    var NgScrollbar = /** @class */ (function () {
        function NgScrollbar(breakpointObserver) {
            this.breakpointObserver = breakpointObserver;
            /**
             * Horizontal custom scrollbar
             */
            this.trackX = false;
            /**
             * Vertical custom Scrollbar
             */
            this.trackY = true;
            /**
             * Auto hide scrollbars on mouse leave
             */
            this.autoHide = false;
            /**
             * Auto update scrollbars on content changes (Mutation Observer)
             */
            this.autoUpdate = true;
            /**
             * The smooth scroll duration when a scrollbar is clicked
             */
            this.scrollToDuration = 400;
            /**
             * Disable custom scrollbars on specific breakpoints
             */
            this.disableOnBreakpoints = [
                layout.Breakpoints.HandsetLandscape,
                layout.Breakpoints.HandsetPortrait
            ];
            this.disabled = false;
            /**
             * Scrollbar state
             */
            this._state = new rxjs.BehaviorSubject(defaultState);
            this.viewStyle = this._state.pipe(operators.map(function (state) { return state.viewStyle; }));
            this.displayX = this._state.pipe(operators.map(function (state) { return state.displayX; }));
            this.displayY = this._state.pipe(operators.map(function (state) { return state.displayY; }));
            /**
             * Mutation observer subscription
             */
            this._updateObserverSub$ = rxjs.Subscription.EMPTY;
            /**
             * CDK breakpoint subscription
             */
            this._breakpointSub$ = rxjs.Subscription.EMPTY;
            /**
             * Steam that emits when scrollbar thumbnail needs to update (for internal uses)
             */
            this._updateObserver = new rxjs.Subject();
            this.updateObserver = this._updateObserver.asObservable();
        }
        Object.defineProperty(NgScrollbar.prototype, "disableScrollbars", {
            /** Disable custom scrollbars and switch back to native scrollbars */
            set: /**
             * Disable custom scrollbars and switch back to native scrollbars
             * @param {?} disable
             * @return {?}
             */ function (disable) {
                disable ? this.disable() : this.enable();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NgScrollbar.prototype, "autoHideClass", {
            get: /**
             * @return {?}
             */ function () {
                return this.autoHide;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NgScrollbar.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.view = this.scrollable.getElementRef().nativeElement;
                if (this.disableOnBreakpoints) {
                    // Enable/Disable custom scrollbar on breakpoints (Used to disable scrollbars on mobile phones)
                    this._breakpointSub$ = this.breakpointObserver.observe(this.disableOnBreakpoints).pipe(
                    // filter(() => this.viewInitialized),
                    operators.tap(function (result) { return result.matches ? _this.disable() : _this.enable(); })).subscribe();
                }
                else {
                    this.enable();
                }
                // Update state on content changes
                this._updateObserverSub$ = this.updateObserver.pipe(operators.throttleTime(200), operators.tap(function () { return _this.updateState(); })).subscribe();
            };
        /**
         * @return {?}
         */
        NgScrollbar.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this._breakpointSub$.unsubscribe();
                this._updateObserverSub$.unsubscribe();
                if (this._observer) {
                    this._observer.disconnect();
                }
            };
        /**
         * Update scrollbar thumbnail position
         */
        /**
         * Update scrollbar thumbnail position
         * @return {?}
         */
        NgScrollbar.prototype.update = /**
         * Update scrollbar thumbnail position
         * @return {?}
         */
            function () {
                if (!this.disabled) {
                    this._updateObserver.next();
                }
            };
        /**
         * Enable custom scrollbar
         */
        /**
         * Enable custom scrollbar
         * @return {?}
         */
        NgScrollbar.prototype.enable = /**
         * Enable custom scrollbar
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.view) {
                    this.disabled = false;
                    // Hide native scrollbars
                    this._nativeScrollbarSize = this.view.offsetWidth - this.view.clientWidth + 1 + "px";
                    this.updateState();
                    if (this.autoUpdate) {
                        // Observe content changes
                        this._observer = new MutationObserver(function () { return _this.update(); });
                        this._observer.observe(this.view, { subtree: true, childList: true, characterData: true });
                    }
                }
            };
        /**
         * Disable custom scrollbar
         */
        /**
         * Disable custom scrollbar
         * @return {?}
         */
        NgScrollbar.prototype.disable = /**
         * Disable custom scrollbar
         * @return {?}
         */
            function () {
                this.disabled = true;
                // Show Native Scrollbars
                this.resetState();
                if (this._observer) {
                    this._observer.disconnect();
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        NgScrollbar.prototype.scrollTo = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                return this.smoothScroll.scrollTo(options);
            };
        /**
         * @param {?} selector
         * @param {?=} offset
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollToElement = /**
         * @param {?} selector
         * @param {?=} offset
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (selector, offset, duration, easeFunc) {
                if (offset === void 0) {
                    offset = 0;
                }
                return this.smoothScroll.scrollToElement(selector, offset, duration, easeFunc);
            };
        /**
         * @param {?} to
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollXTo = /**
         * @param {?} to
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (to, duration, easeFunc) {
                return this.smoothScroll.scrollXTo(to, duration, easeFunc);
            };
        /**
         * @param {?} to
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollYTo = /**
         * @param {?} to
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (to, duration, easeFunc) {
                return this.smoothScroll.scrollYTo(to, duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollToTop = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.smoothScroll.scrollToTop(duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollToBottom = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.smoothScroll.scrollToBottom(duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollToRight = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.smoothScroll.scrollToRight(duration, easeFunc);
            };
        /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
        NgScrollbar.prototype.scrollToLeft = /**
         * @param {?=} duration
         * @param {?=} easeFunc
         * @return {?}
         */
            function (duration, easeFunc) {
                return this.smoothScroll.scrollToLeft(duration, easeFunc);
            };
        /**
         * @return {?}
         */
        NgScrollbar.prototype.updateState = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var paddingBottom = '0';
                /** @type {?} */
                var paddingRight = '0';
                /** @type {?} */
                var displayY = false;
                /** @type {?} */
                var displayX = false;
                /** @type {?} */
                var size = "calc(100% + " + this._nativeScrollbarSize + ")";
                if (this.trackY) {
                    // Check if vertical scrollbar should be displayed
                    if (this.view.scrollHeight > this.view.clientHeight) {
                        displayY = true;
                        paddingRight = this.overlay ? '0' : this._nativeScrollbarSize;
                    }
                }
                if (this.trackX) {
                    // Check if horizontal scrollbar should be displayed
                    if (this.view.scrollWidth > this.view.clientWidth) {
                        displayX = true;
                        paddingBottom = this.overlay ? '0' : this._nativeScrollbarSize;
                    }
                }
                this._state.next({
                    viewStyle: {
                        width: size,
                        height: size,
                        paddingBottom: paddingBottom,
                        paddingRight: paddingRight
                    },
                    displayX: displayX,
                    displayY: displayY
                });
            };
        /**
         * @return {?}
         */
        NgScrollbar.prototype.resetState = /**
         * @return {?}
         */
            function () {
                this._state.next({
                    viewStyle: __assign({}, this._state.value.viewStyle, defaultState.viewStyle),
                    displayX: defaultState.displayX,
                    displayY: defaultState.displayY
                });
            };
        NgScrollbar.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-scrollbar',
                        template: "<div class=\"ng-scrollbar-container\">\r\n\r\n  <div cdkScrollable smoothScroll class=\"ng-scrollbar-view {{viewClass}}\" [ngStyle]=\"viewStyle | async\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n\r\n  <ng-scrollbar-thumb #vertical\r\n                      *ngIf=\"!disabled && trackY\"\r\n                      orientation=\"vertical\"\r\n                      [class.ng-scrollbar-visible]=\"displayY | async\"\r\n                      [barClass]=\"barClass\"\r\n                      [thumbClass]=\"thumbClass\"\r\n                      [scrollToDuration]=\"scrollToDuration\">\r\n  </ng-scrollbar-thumb>\r\n\r\n  <ng-scrollbar-thumb #horizontal\r\n                      *ngIf=\"!disabled && trackX\"\r\n                      orientation=\"horizontal\"\r\n                      [class.ng-scrollbar-visible]=\"displayX | async\"\r\n                      [barClass]=\"barClass\"\r\n                      [thumbClass]=\"thumbClass\"\r\n                      [scrollToDuration]=\"scrollToDuration\">\r\n  </ng-scrollbar-thumb>\r\n\r\n</div>\r\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        styles: [":host{display:block;overflow:hidden}.ng-scrollbar-container,.ng-scrollbar-view,:host{position:relative;height:100%;width:100%}.ng-scrollbar-container{overflow:hidden;top:0;left:0}.ng-scrollbar-view{overflow:scroll;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-overflow-scrolling:touch}.ng-scrollbar-view ::-webkit-scrollbar{background:0 0}ng-scrollbar-thumb{display:none}ng-scrollbar-thumb.ng-scrollbar-visible{display:block}::ng-deep .ng-scrollbar-auto-hide .ng-scrollbar{opacity:0;transition:opacity 120ms ease-out}::ng-deep .ng-scrollbar-auto-hide:active .ng-scrollbar,::ng-deep .ng-scrollbar-auto-hide:focus .ng-scrollbar,::ng-deep .ng-scrollbar-auto-hide:hover .ng-scrollbar{opacity:1;transition:opacity 340ms ease-out}::ng-deep .ng-scrollbar{position:absolute;z-index:1;border-radius:4px}::ng-deep .ng-scrollbar-thumb{position:relative;width:0;height:0;border-radius:inherit;background-color:rgba(0,0,0,.2);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:height 150ms ease-out}::ng-deep .ng-scrollbar-thumb:active,::ng-deep .ng-scrollbar-thumb:hover{background-color:rgba(0,0,0,.3)}::ng-deep .ng-scrollbar-vertical{right:6px;top:6px;bottom:6px;width:8px}::ng-deep .ng-scrollbar-vertical .ng-scrollbar-thumb{width:100%}::ng-deep .ng-scrollbar-horizontal{left:6px;right:6px;bottom:6px;height:8px}::ng-deep .ng-scrollbar-horizontal .ng-scrollbar-thumb{height:100%}"]
                    }] }
        ];
        /** @nocollapse */
        NgScrollbar.ctorParameters = function () {
            return [
                { type: layout.BreakpointObserver }
            ];
        };
        NgScrollbar.propDecorators = {
            trackX: [{ type: core.Input }],
            trackY: [{ type: core.Input }],
            autoHide: [{ type: core.Input }],
            autoUpdate: [{ type: core.Input }],
            viewClass: [{ type: core.Input }],
            barClass: [{ type: core.Input }],
            thumbClass: [{ type: core.Input }],
            scrollToDuration: [{ type: core.Input }],
            overlay: [{ type: core.Input }],
            disableOnBreakpoints: [{ type: core.Input }],
            disableScrollbars: [{ type: core.Input, args: ['disabled',] }],
            scrollable: [{ type: core.ViewChild, args: [scrolling.CdkScrollable,] }],
            smoothScroll: [{ type: core.ViewChild, args: [SmoothScroll,] }],
            verticalScrollbar: [{ type: core.ViewChild, args: ['vertical', { read: core.ElementRef },] }],
            horizontalScrollbar: [{ type: core.ViewChild, args: ['horizontal', { read: core.ElementRef },] }],
            autoHideClass: [{ type: core.HostBinding, args: ['class.ng-scrollbar-auto-hide',] }]
        };
        return NgScrollbar;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var ɵ0 = function (val) { return "translate3d(0, " + val + "px, 0)"; }, ɵ1 = function (val) { return "translate3d(" + val + "px, 0, 0)"; };
    /** @type {?} */
    var axis = {
        vertical: {
            topOrLeft: 'top',
            offsetYOrX: 'offsetY',
            clientYOrX: 'clientY',
            heightOrWidth: 'height',
            scrollTopLeft: 'scrollTop',
            clientHeightOrWidth: 'clientHeight',
            scrollHeightOrWidth: 'scrollHeight',
            transform: ɵ0
        },
        horizontal: {
            topOrLeft: 'left',
            offsetYOrX: 'offsetX',
            clientYOrX: 'clientX',
            heightOrWidth: 'width',
            scrollTopLeft: 'scrollLeft',
            clientHeightOrWidth: 'clientWidth',
            scrollHeightOrWidth: 'scrollWidth',
            transform: ɵ1
        }
    };
    var NgScrollbarThumb = /** @class */ (function () {
        function NgScrollbarThumb(zone, document, ngScrollbar) {
            this.zone = zone;
            this.document = document;
            this.ngScrollbar = ngScrollbar;
            this._minThumbSize = 20;
            this._naturalThumbSize = 0;
            this._thumbSize = 0;
            this._trackMax = 0;
            this._scrollMax = 0;
            this._currPos = 0;
            this._scroll$ = rxjs.Subscription.EMPTY;
            this._thumbDrag$ = rxjs.Subscription.EMPTY;
            this._updateObserver$ = rxjs.Subscription.EMPTY;
            this._state = new rxjs.BehaviorSubject({
                transform: 'translate3d(0, 0, 0)'
            });
            /**
             * Scrollbar styles
             */
            this.scrollbarStyle = this._state.asObservable();
        }
        Object.defineProperty(NgScrollbarThumb.prototype, "axis", {
            /**
             * Get the proper properties for scrollbar orientation
             */
            get: /**
             * Get the proper properties for scrollbar orientation
             * @return {?}
             */ function () {
                return axis[this.orientation];
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NgScrollbarThumb.prototype, "thumbSize", {
            /**
             * Calculate scrollbar thumbnail size
             */
            get: /**
             * Calculate scrollbar thumbnail size
             * @return {?}
             */ function () {
                /** @type {?} */
                var scrollBarClientHeightOrWidth = this.bar.nativeElement[this.axis.clientHeightOrWidth];
                /** @type {?} */
                var viewClientHeightOrWidth = this._view[this.axis.clientHeightOrWidth];
                /** @type {?} */
                var viewScrollHeightOrWidth = this._view[this.axis.scrollHeightOrWidth];
                this._naturalThumbSize = scrollBarClientHeightOrWidth / viewScrollHeightOrWidth * scrollBarClientHeightOrWidth;
                this._scrollMax = viewScrollHeightOrWidth - viewClientHeightOrWidth;
                return this.scrollBoundaries(this._naturalThumbSize, this._scrollMax);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NgScrollbarThumb.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._view = this.ngScrollbar.scrollable.getElementRef().nativeElement;
                // Start view scroll event
                this._scroll$ = this.ngScrollbar.scrollable.elementScrolled()
                    .subscribe(function () { return _this.updateScrollbar(); });
                // Start scrollbar thumbnail drag events
                this.zone.runOutsideAngular(function () {
                    return _this._thumbDrag$ = _this.startThumbEvents().subscribe();
                });
                // Update scrollbar thumbnail size on content changes
                this._updateObserver$ = this.ngScrollbar.updateObserver.pipe(operators.throttleTime(200), operators.tap(function () { return _this.updateScrollbar(); }), 
                // Make sure scrollbar thumbnail position is correct after the new content is rendered
                operators.debounceTime(200), operators.tap(function () { return _this.updateScrollbar(); })).subscribe();
                // Initialize scrollbar
                setTimeout(function () { return _this.updateScrollbar(); }, 200);
            };
        /**
         * @return {?}
         */
        NgScrollbarThumb.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this._scroll$.unsubscribe();
                this._thumbDrag$.unsubscribe();
                this._updateObserver$.unsubscribe();
            };
        /**
         * Scrollbar click
         * @param e Mouse event
         */
        /**
         * Scrollbar click
         * @param {?} e Mouse event
         * @return {?}
         */
        NgScrollbarThumb.prototype.onScrollbarClick = /**
         * Scrollbar click
         * @param {?} e Mouse event
         * @return {?}
         */
            function (e) {
                var _a;
                if (e.target === e.currentTarget) {
                    /** @type {?} */
                    var offsetYOrX = e[this.axis.offsetYOrX] - this._naturalThumbSize * .5;
                    /** @type {?} */
                    var thumbPositionPercentage = offsetYOrX * 100 / this.bar.nativeElement[this.axis.clientHeightOrWidth];
                    /** @type {?} */
                    var value = thumbPositionPercentage * this._view[this.axis.scrollHeightOrWidth] / 100;
                    this.ngScrollbar.scrollTo(/** @type {?} */ (_a = {}, _a[this.axis.topOrLeft] = value, _a.duration = this.scrollToDuration, _a)).subscribe();
                }
            };
        /**
         * Update scrollbar
         * @return {?}
         */
        NgScrollbarThumb.prototype.updateScrollbar = /**
         * Update scrollbar
         * @return {?}
         */
            function () {
                var _this = this;
                this._thumbSize = this.thumb.nativeElement[this.axis.clientHeightOrWidth];
                this._trackMax = this.bar.nativeElement[this.axis.clientHeightOrWidth] - this._thumbSize;
                this._currPos = this._view[this.axis.scrollTopLeft] * this._trackMax / this._scrollMax;
                this.zone.run(function () {
                    return rxjs.animationFrameScheduler.schedule(function () {
                        var _a;
                        return _this.updateState((_a = {
                            transform: _this.axis.transform(_this._currPos)
                        },
                            _a[_this.axis.heightOrWidth] = _this.thumbSize + "px",
                            _a));
                    });
                });
            };
        /**
         * Start vertical thumb worker
         * @return {?}
         */
        NgScrollbarThumb.prototype.startThumbEvents = /**
         * Start vertical thumb worker
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var mouseDown$ = rxjs.fromEvent(this.thumb.nativeElement, 'mousedown');
                /** @type {?} */
                var mouseMove$ = rxjs.fromEvent(this.document, 'mousemove');
                /** @type {?} */
                var mouseUp$ = rxjs.fromEvent(this.document, 'mouseup').pipe(operators.tap(function () { return _this.document.onselectstart = null; }));
                return mouseDown$.pipe(operators.tap(function () {
                    _this.document.onselectstart = function () { return false; };
                    // Initialize trackMax for before start dragging
                    _this._trackMax = _this.bar.nativeElement[_this.axis.clientHeightOrWidth] - _this._thumbSize;
                }), operators.pluck(this.axis.offsetYOrX), operators.mergeMap(function (mouseDownOffset) {
                    return mouseMove$.pipe(operators.takeUntil(mouseUp$), operators.pluck(_this.axis.clientYOrX), operators.tap(function (mouseMoveClient) {
                        var _a;
                        /** @type {?} */
                        var offsetYOrX = mouseMoveClient - _this.bar.nativeElement.getBoundingClientRect()[_this.axis.topOrLeft];
                        /** @type {?} */
                        var value = _this._scrollMax * (offsetYOrX - mouseDownOffset) / _this._trackMax;
                        _this.ngScrollbar.scrollable.scrollTo((_a = {}, _a[_this.axis.topOrLeft] = value, _a));
                    }));
                }));
            };
        /**
         * Get scrollbar thumb size
         * @param {?} naturalThumbSize
         * @param {?} scrollMax
         * @return {?}
         */
        NgScrollbarThumb.prototype.scrollBoundaries = /**
         * Get scrollbar thumb size
         * @param {?} naturalThumbSize
         * @param {?} scrollMax
         * @return {?}
         */
            function (naturalThumbSize, scrollMax) {
                return (naturalThumbSize < this._minThumbSize) ? this._minThumbSize : scrollMax ? naturalThumbSize : 0;
            };
        /**
         * @param {?} state
         * @return {?}
         */
        NgScrollbarThumb.prototype.updateState = /**
         * @param {?} state
         * @return {?}
         */
            function (state) {
                this._state.next(__assign({}, this._state.value, state));
            };
        NgScrollbarThumb.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-scrollbar-thumb',
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        template: "\n    <div #bar class=\"ng-scrollbar ng-scrollbar-{{orientation}} {{barClass}}\" (mousedown)=\"onScrollbarClick($event)\">\n      <div #thumb class=\"ng-scrollbar-thumb {{thumbClass}}\" [ngStyle]=\"scrollbarStyle | async\"></div>\n    </div>\n  "
                    }] }
        ];
        /** @nocollapse */
        NgScrollbarThumb.ctorParameters = function () {
            return [
                { type: core.NgZone },
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] },
                { type: NgScrollbar, decorators: [{ type: core.Inject, args: [core.forwardRef(function () { return NgScrollbar; }),] }] }
            ];
        };
        NgScrollbarThumb.propDecorators = {
            barClass: [{ type: core.Input }],
            thumbClass: [{ type: core.Input }],
            scrollToDuration: [{ type: core.Input }],
            orientation: [{ type: core.Input }],
            bar: [{ type: core.ViewChild, args: ['bar',] }],
            thumb: [{ type: core.ViewChild, args: ['thumb',] }]
        };
        return NgScrollbarThumb;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgScrollbarModule = /** @class */ (function () {
        function NgScrollbarModule() {
        }
        NgScrollbarModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            scrolling.ScrollingModule,
                            SmoothScrollModule,
                            layout.LayoutModule
                        ],
                        declarations: [
                            NgScrollbar,
                            NgScrollbarThumb
                        ],
                        exports: [
                            NgScrollbar
                        ]
                    },] }
        ];
        return NgScrollbarModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgScrollbarModule = NgScrollbarModule;
    exports.NgScrollbar = NgScrollbar;
    exports.SmoothScrollModule = SmoothScrollModule;
    exports.smoothScroll = smoothScroll;
    exports.easeInOutQuad = easeInOutQuad;
    exports.easeInCubic = easeInCubic;
    exports.inOutQuintic = inOutQuintic;
    exports.SmoothScroll = SmoothScroll;
    exports.ɵa = NgScrollbarThumb;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNjcm9sbGJhci51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL25neC1zY3JvbGxiYXIvc21vb3RoLXNjcm9sbC9zbW9vdGgtc2Nyb2xsLnRzIiwibmc6Ly9uZ3gtc2Nyb2xsYmFyL3Ntb290aC1zY3JvbGwvc21vb3RoLXNjcm9sbC5tb2R1bGUudHMiLCJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwibmc6Ly9uZ3gtc2Nyb2xsYmFyL3Njcm9sbGJhci9uZy1zY3JvbGxiYXIudHMiLCJuZzovL25neC1zY3JvbGxiYXIvc2Nyb2xsYmFyL25nLXNjcm9sbGJhci10aHVtYi50cyIsIm5nOi8vbmd4LXNjcm9sbGJhci9zY3JvbGxiYXIvbmctc2Nyb2xsYmFyLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgc3VwcG9ydHNTY3JvbGxCZWhhdmlvciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20sIG9mLCBhbmltYXRpb25GcmFtZVNjaGVkdWxlciB9IGZyb20gJ3J4anMnO1xyXG5cclxuZXhwb3J0IHR5cGUgU21vb3RoU2Nyb2xsRWFzZUZ1bmMgPSAodDogbnVtYmVyLCBzOiBudW1iZXIsIGM6IG51bWJlciwgZDogbnVtYmVyKSA9PiBudW1iZXI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNtb290aFNjcm9sbE9wdGlvbnMge1xyXG4gIHRvcD86IG51bWJlcjtcclxuICBsZWZ0PzogbnVtYmVyO1xyXG4gIG9mZnNldFRvcDogbnVtYmVyO1xyXG4gIG9mZnNldExlZnQ6IG51bWJlcjtcclxuICBkdXJhdGlvbjogbnVtYmVyO1xyXG4gIHNjcm9sbEZ1bmM6ICh0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIGVhc2VGdW5jOiBTbW9vdGhTY3JvbGxFYXNlRnVuYztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY3JvbGxUb09wdGlvbnMge1xyXG4gIHRvcD86IG51bWJlcjtcclxuICBsZWZ0PzogbnVtYmVyO1xyXG4gIGR1cmF0aW9uPzogbnVtYmVyO1xyXG4gIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmM7XHJcbn1cclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW3Ntb290aFNjcm9sbF0sIFtzbW9vdGgtc2Nyb2xsXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFNtb290aFNjcm9sbCB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdmlldzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsOiBFbGVtZW50UmVmKSB7XHJcbiAgICB0aGlzLnZpZXcgPSBlbC5uYXRpdmVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzY3JvbGxGdW5jKGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIpIHtcclxuICAgIGlmIChzdXBwb3J0c1Njcm9sbEJlaGF2aW9yKCkpIHtcclxuICAgICAgdGhpcy52aWV3LnNjcm9sbFRvKHt0b3AsIGxlZnR9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0b3A7XHJcbiAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gbGVmdDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNjcm9sbFRvKG9wdGlvbnM6IFNjcm9sbFRvT3B0aW9ucyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgY29uc3Qgc2Nyb2xsRnVuYyA9IChsZWZ0OiBudW1iZXIsIHRvcDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGlmIChzdXBwb3J0c1Njcm9sbEJlaGF2aW9yKCkpIHtcclxuICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG8oe3RvcCwgbGVmdH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0b3A7XHJcbiAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSBsZWZ0O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24pIHtcclxuICAgICAgY29uc3Qgc21vb3RoU2Nyb2xsT3B0aW9uczogU21vb3RoU2Nyb2xsT3B0aW9ucyA9IHtcclxuICAgICAgICB0b3A6IG9wdGlvbnMudG9wLFxyXG4gICAgICAgIGxlZnQ6IG9wdGlvbnMubGVmdCxcclxuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcclxuICAgICAgICBlYXNlRnVuYzogb3B0aW9ucy5lYXNlRnVuYyB8fCBlYXNlSW5PdXRRdWFkLFxyXG4gICAgICAgIG9mZnNldFRvcDogdGhpcy52aWV3LnNjcm9sbFRvcCxcclxuICAgICAgICBvZmZzZXRMZWZ0OiB0aGlzLnZpZXcuc2Nyb2xsTGVmdCxcclxuICAgICAgICBzY3JvbGxGdW5jXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBmcm9tKHNtb290aFNjcm9sbChzbW9vdGhTY3JvbGxPcHRpb25zKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNjcm9sbEZ1bmMob3B0aW9ucy5sZWZ0LCBvcHRpb25zLnRvcCk7XHJcbiAgICByZXR1cm4gb2Y8dm9pZD4oKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvRWxlbWVudChzZWxlY3Rvcjogc3RyaW5nLCBvZmZzZXQgPSAwLCBkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgY29uc3QgdGFyZ2V0OiBIVE1MRWxlbWVudCA9IHRoaXMudmlldy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIHJldHVybiB0YXJnZXQgPyB0aGlzLnNjcm9sbFRvKHtsZWZ0OiB0YXJnZXQub2Zmc2V0TGVmdCwgdG9wOiB0YXJnZXQub2Zmc2V0VG9wIC0gb2Zmc2V0LCBkdXJhdGlvbiwgZWFzZUZ1bmN9KSA6IG9mPHZvaWQ+KCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxYVG8obGVmdDogbnVtYmVyLCBkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsVG8oe2xlZnQsIGR1cmF0aW9uLCBlYXNlRnVuY30pO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsWVRvKHRvcDogbnVtYmVyLCBkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsVG8oe3RvcCwgZHVyYXRpb24sIGVhc2VGdW5jfSk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcChkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsWVRvKDAsIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0JvdHRvbShkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsWVRvKHRoaXMudmlldy5zY3JvbGxIZWlnaHQsIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1JpZ2h0KGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxYVG8odGhpcy52aWV3LnNjcm9sbFdpZHRoLCBkdXJhdGlvbiwgZWFzZUZ1bmMpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9MZWZ0KGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxYVG8oMCwgZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGwob3B0aW9uczogU21vb3RoU2Nyb2xsT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgIGxldCBjdXJyZW50VGltZSA9IDA7XHJcbiAgICBjb25zdCBpbmNyZW1lbnQgPSAyMDtcclxuICAgIGxldCB2YWxYID0gb3B0aW9ucy5vZmZzZXRMZWZ0O1xyXG4gICAgbGV0IHZhbFkgPSBvcHRpb25zLm9mZnNldFRvcDtcclxuXHJcbiAgICBjb25zdCBhbmltYXRlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgICAvLyBpbmNyZW1lbnQgdGhlIHRpbWVcclxuICAgICAgY3VycmVudFRpbWUgKz0gaW5jcmVtZW50O1xyXG4gICAgICAvLyBmaW5kIHRoZSB2YWx1ZSB3aXRoIHRoZSBlYXNpbmcgZnVuY3Rpb25cclxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxlZnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc3QgZGVsdGFYID0gb3B0aW9ucy5sZWZ0IC0gb3B0aW9ucy5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIHZhbFggPSBvcHRpb25zLmVhc2VGdW5jKGN1cnJlbnRUaW1lLCBvcHRpb25zLm9mZnNldExlZnQsIGRlbHRhWCwgb3B0aW9ucy5kdXJhdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRvcCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSBvcHRpb25zLnRvcCAtIG9wdGlvbnMub2Zmc2V0VG9wO1xyXG4gICAgICAgIHZhbFkgPSBvcHRpb25zLmVhc2VGdW5jKGN1cnJlbnRUaW1lLCBvcHRpb25zLm9mZnNldFRvcCwgZGVsdGFZLCBvcHRpb25zLmR1cmF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBzY3JvbGwgdG8gcG9zaXRpb25cclxuICAgICAgb3B0aW9ucy5zY3JvbGxGdW5jKHZhbFgsIHZhbFkpO1xyXG4gICAgICAvLyBkbyB0aGUgYW5pbWF0aW9uIHVubGVzcyBpdHMgb3ZlclxyXG4gICAgICBpZiAoY3VycmVudFRpbWUgPCBvcHRpb25zLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIuc2NoZWR1bGUoYW5pbWF0ZVNjcm9sbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgYW5pbWF0ZVNjcm9sbCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBlYXNpbmcgZnVuY3Rpb25zIGh0dHA6Ly9nb28uZ2wvNUhMbDhcclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dFF1YWQodDogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlciwgZDogbnVtYmVyKSB7XHJcbiAgdCAvPSBkIC8gMjtcclxuICBpZiAodCA8IDEpIHtcclxuICAgIHJldHVybiAoYyAvIDIpICogdCAqIHQgKyBiO1xyXG4gIH1cclxuICB0LS07XHJcbiAgcmV0dXJuICgtYyAvIDIpICogKHQgKiAodCAtIDIpIC0gMSkgKyBiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluQ3ViaWModDogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlciwgZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgdGMgPSAodCAvPSBkKSAqIHQgKiB0O1xyXG4gIHJldHVybiBiICsgYyAqIHRjO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5PdXRRdWludGljKHQ6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHRzID0gKHQgLz0gZCkgKiB0LFxyXG4gICAgdGMgPSB0cyAqIHQ7XHJcbiAgcmV0dXJuIGIgKyBjICogKDYgKiB0YyAqIHRzICsgLTE1ICogdHMgKiB0cyArIDEwICogdGMpO1xyXG59XHJcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFNjcm9sbGluZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9zY3JvbGxpbmcnO1xyXG5pbXBvcnQgeyBTbW9vdGhTY3JvbGwgfSBmcm9tICcuL3Ntb290aC1zY3JvbGwnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbU2Nyb2xsaW5nTW9kdWxlXSxcclxuICBkZWNsYXJhdGlvbnM6IFtTbW9vdGhTY3JvbGxdLFxyXG4gIGV4cG9ydHM6IFtTbW9vdGhTY3JvbGxdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTbW9vdGhTY3JvbGxNb2R1bGUge1xyXG59XHJcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgSG9zdEJpbmRpbmcsIFZpZXdDaGlsZCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDZGtTY3JvbGxhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3Njcm9sbGluZyc7XHJcbmltcG9ydCB7IEJyZWFrcG9pbnRPYnNlcnZlciwgQnJlYWtwb2ludHMsIEJyZWFrcG9pbnRTdGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9sYXlvdXQnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QsIFN1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uTGlrZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBtYXAsIHRhcCwgdGhyb3R0bGVUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBTbW9vdGhTY3JvbGwsIFNtb290aFNjcm9sbEVhc2VGdW5jIH0gZnJvbSAnLi4vc21vb3RoLXNjcm9sbC9zbW9vdGgtc2Nyb2xsJztcclxuXHJcbmludGVyZmFjZSBOZ1Njcm9sbGJhclN0YXRlIHtcclxuICB2aWV3U3R5bGU/OiB7XHJcbiAgICB3aWR0aD86IHN0cmluZztcclxuICAgIGhlaWdodD86IHN0cmluZztcclxuICAgIHBhZGRpbmdSaWdodD86IHN0cmluZztcclxuICAgIHBhZGRpbmdCb3R0b20/OiBzdHJpbmc7XHJcbiAgfTtcclxuICBkaXNwbGF5WD86IGJvb2xlYW47XHJcbiAgZGlzcGxheVk/OiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0U3RhdGU6IE5nU2Nyb2xsYmFyU3RhdGUgPSB7XHJcbiAgdmlld1N0eWxlOiB7XHJcbiAgICBwYWRkaW5nUmlnaHQ6ICcwJyxcclxuICAgIHBhZGRpbmdCb3R0b206ICcwJyxcclxuICB9LFxyXG4gIGRpc3BsYXlYOiBmYWxzZSxcclxuICBkaXNwbGF5WTogZmFsc2VcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbmctc2Nyb2xsYmFyJyxcclxuICB0ZW1wbGF0ZVVybDogJ25nLXNjcm9sbGJhci5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnbmctc2Nyb2xsYmFyLnNjc3MnXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgTmdTY3JvbGxiYXIgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAvKiogSG9yaXpvbnRhbCBjdXN0b20gc2Nyb2xsYmFyICovXHJcbiAgQElucHV0KCkgdHJhY2tYID0gZmFsc2U7XHJcbiAgLyoqIFZlcnRpY2FsIGN1c3RvbSBTY3JvbGxiYXIgKi9cclxuICBASW5wdXQoKSB0cmFja1kgPSB0cnVlO1xyXG4gIC8qKiBBdXRvIGhpZGUgc2Nyb2xsYmFycyBvbiBtb3VzZSBsZWF2ZSAqL1xyXG4gIEBJbnB1dCgpIGF1dG9IaWRlID0gZmFsc2U7XHJcbiAgLyoqIEF1dG8gdXBkYXRlIHNjcm9sbGJhcnMgb24gY29udGVudCBjaGFuZ2VzIChNdXRhdGlvbiBPYnNlcnZlcikgKi9cclxuICBASW5wdXQoKSBhdXRvVXBkYXRlID0gdHJ1ZTtcclxuICAvKiogVmlld3BvcnQgY2xhc3MgKi9cclxuICBASW5wdXQoKSB2aWV3Q2xhc3M6IHN0cmluZztcclxuICAvKiogU2Nyb2xsYmFycyBjbGFzcyAqL1xyXG4gIEBJbnB1dCgpIGJhckNsYXNzOiBzdHJpbmc7XHJcbiAgLyoqIFNjcm9sbGJhcnMgdGh1bWJuYWlscyBjbGFzcyAqL1xyXG4gIEBJbnB1dCgpIHRodW1iQ2xhc3M6IHN0cmluZztcclxuICAvKiogVGhlIHNtb290aCBzY3JvbGwgZHVyYXRpb24gd2hlbiBhIHNjcm9sbGJhciBpcyBjbGlja2VkICovXHJcbiAgQElucHV0KCkgc2Nyb2xsVG9EdXJhdGlvbiA9IDQwMDtcclxuICAvKiogVXNlIG92ZXJsYXkgc2Nyb2xsYmFycyAqL1xyXG4gIEBJbnB1dCgpIG92ZXJsYXk6IGJvb2xlYW47XHJcbiAgLyoqIERpc2FibGUgY3VzdG9tIHNjcm9sbGJhcnMgb24gc3BlY2lmaWMgYnJlYWtwb2ludHMgKi9cclxuICBASW5wdXQoKSBkaXNhYmxlT25CcmVha3BvaW50cyA9IFtcclxuICAgIEJyZWFrcG9pbnRzLkhhbmRzZXRMYW5kc2NhcGUsXHJcbiAgICBCcmVha3BvaW50cy5IYW5kc2V0UG9ydHJhaXRcclxuICBdO1xyXG5cclxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFycyBhbmQgc3dpdGNoIGJhY2sgdG8gbmF0aXZlIHNjcm9sbGJhcnMgKi9cclxuICBASW5wdXQoJ2Rpc2FibGVkJykgc2V0IGRpc2FibGVTY3JvbGxiYXJzKGRpc2FibGU6IGJvb2xlYW4pIHtcclxuICAgIGRpc2FibGUgPyB0aGlzLmRpc2FibGUoKSA6IHRoaXMuZW5hYmxlKCk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICBAVmlld0NoaWxkKENka1Njcm9sbGFibGUpIHNjcm9sbGFibGU6IENka1Njcm9sbGFibGU7XHJcbiAgQFZpZXdDaGlsZChTbW9vdGhTY3JvbGwpIHNtb290aFNjcm9sbDogU21vb3RoU2Nyb2xsO1xyXG4gIEBWaWV3Q2hpbGQoJ3ZlcnRpY2FsJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSB2ZXJ0aWNhbFNjcm9sbGJhcjogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCdob3Jpem9udGFsJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSBob3Jpem9udGFsU2Nyb2xsYmFyOiBFbGVtZW50UmVmO1xyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLm5nLXNjcm9sbGJhci1hdXRvLWhpZGUnKSBnZXQgYXV0b0hpZGVDbGFzcygpIHtcclxuICAgIHJldHVybiB0aGlzLmF1dG9IaWRlO1xyXG4gIH1cclxuXHJcbiAgLyoqIE5hdGl2ZSBzY3JvbGxiYXIgc2l6ZSAqL1xyXG4gIHByaXZhdGUgX25hdGl2ZVNjcm9sbGJhclNpemU6IHN0cmluZztcclxuXHJcbiAgLyoqIFNjcm9sbGJhciBzdGF0ZSAqL1xyXG4gIHByaXZhdGUgX3N0YXRlID0gbmV3IEJlaGF2aW9yU3ViamVjdDxOZ1Njcm9sbGJhclN0YXRlPihkZWZhdWx0U3RhdGUpO1xyXG4gIHZpZXdTdHlsZTogT2JzZXJ2YWJsZTxhbnk+ID0gdGhpcy5fc3RhdGUucGlwZShtYXAoKHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlKSA9PiBzdGF0ZS52aWV3U3R5bGUpKTtcclxuICBkaXNwbGF5WDogT2JzZXJ2YWJsZTxib29sZWFuPiA9IHRoaXMuX3N0YXRlLnBpcGUobWFwKChzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSkgPT4gc3RhdGUuZGlzcGxheVgpKTtcclxuICBkaXNwbGF5WTogT2JzZXJ2YWJsZTxib29sZWFuPiA9IHRoaXMuX3N0YXRlLnBpcGUobWFwKChzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSkgPT4gc3RhdGUuZGlzcGxheVkpKTtcclxuXHJcbiAgLyoqIE11dGF0aW9uIG9ic2VydmVyIHN1YnNjcmlwdGlvbiAqL1xyXG4gIHByaXZhdGUgX3VwZGF0ZU9ic2VydmVyU3ViJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuICAvKiogQ0RLIGJyZWFrcG9pbnQgc3Vic2NyaXB0aW9uICovXHJcbiAgcHJpdmF0ZSBfYnJlYWtwb2ludFN1YiQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XHJcbiAgLyoqIFZpZXdwb3J0IEVsZW1lbnQgKi9cclxuICB2aWV3OiBIVE1MRWxlbWVudDtcclxuICAvKiogT2JzZXJ2ZSBjb250ZW50IGNoYW5nZXMgKi9cclxuICBwcml2YXRlIF9vYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcclxuXHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgdGh1bWJuYWlsIG5lZWRzIHRvIHVwZGF0ZSAoZm9yIGludGVybmFsIHVzZXMpICovXHJcbiAgcHJpdmF0ZSBfdXBkYXRlT2JzZXJ2ZXIgPSBuZXcgU3ViamVjdCgpO1xyXG4gIHVwZGF0ZU9ic2VydmVyID0gdGhpcy5fdXBkYXRlT2JzZXJ2ZXIuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYnJlYWtwb2ludE9ic2VydmVyOiBCcmVha3BvaW50T2JzZXJ2ZXIpIHtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMudmlldyA9IHRoaXMuc2Nyb2xsYWJsZS5nZXRFbGVtZW50UmVmKCkubmF0aXZlRWxlbWVudDtcclxuXHJcbiAgICBpZiAodGhpcy5kaXNhYmxlT25CcmVha3BvaW50cykge1xyXG4gICAgICAvLyBFbmFibGUvRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyIG9uIGJyZWFrcG9pbnRzIChVc2VkIHRvIGRpc2FibGUgc2Nyb2xsYmFycyBvbiBtb2JpbGUgcGhvbmVzKVxyXG4gICAgICB0aGlzLl9icmVha3BvaW50U3ViJCA9IHRoaXMuYnJlYWtwb2ludE9ic2VydmVyLm9ic2VydmUodGhpcy5kaXNhYmxlT25CcmVha3BvaW50cykucGlwZShcclxuICAgICAgICAvLyBmaWx0ZXIoKCkgPT4gdGhpcy52aWV3SW5pdGlhbGl6ZWQpLFxyXG4gICAgICAgIHRhcCgocmVzdWx0OiBCcmVha3BvaW50U3RhdGUpID0+IHJlc3VsdC5tYXRjaGVzID8gdGhpcy5kaXNhYmxlKCkgOiB0aGlzLmVuYWJsZSgpKVxyXG4gICAgICApLnN1YnNjcmliZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgc3RhdGUgb24gY29udGVudCBjaGFuZ2VzXHJcbiAgICB0aGlzLl91cGRhdGVPYnNlcnZlclN1YiQgPSB0aGlzLnVwZGF0ZU9ic2VydmVyLnBpcGUoXHJcbiAgICAgIHRocm90dGxlVGltZSgyMDApLFxyXG4gICAgICB0YXAoKCkgPT4gdGhpcy51cGRhdGVTdGF0ZSgpKVxyXG4gICAgKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgdGhpcy5fYnJlYWtwb2ludFN1YiQudW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMuX3VwZGF0ZU9ic2VydmVyU3ViJC51bnN1YnNjcmliZSgpO1xyXG4gICAgaWYgKHRoaXMuX29ic2VydmVyKSB7XHJcbiAgICAgIHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBzY3JvbGxiYXIgdGh1bWJuYWlsIHBvc2l0aW9uXHJcbiAgICovXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZU9ic2VydmVyLm5leHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuYWJsZSBjdXN0b20gc2Nyb2xsYmFyXHJcbiAgICovXHJcbiAgZW5hYmxlKCkge1xyXG4gICAgaWYgKHRoaXMudmlldykge1xyXG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIC8vIEhpZGUgbmF0aXZlIHNjcm9sbGJhcnNcclxuICAgICAgdGhpcy5fbmF0aXZlU2Nyb2xsYmFyU2l6ZSA9IGAke3RoaXMudmlldy5vZmZzZXRXaWR0aCAtIHRoaXMudmlldy5jbGllbnRXaWR0aCArIDF9cHhgO1xyXG4gICAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5hdXRvVXBkYXRlKSB7XHJcbiAgICAgICAgLy8gT2JzZXJ2ZSBjb250ZW50IGNoYW5nZXNcclxuICAgICAgICB0aGlzLl9vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHRoaXMudXBkYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuX29ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LCB7c3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERpc2FibGUgY3VzdG9tIHNjcm9sbGJhclxyXG4gICAqL1xyXG4gIGRpc2FibGUoKSB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIC8vIFNob3cgTmF0aXZlIFNjcm9sbGJhcnNcclxuICAgIHRoaXMucmVzZXRTdGF0ZSgpO1xyXG4gICAgaWYgKHRoaXMuX29ic2VydmVyKSB7XHJcbiAgICAgIHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNjcm9sbFRvKG9wdGlvbnM6IFNjcm9sbFRvT3B0aW9ucyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9FbGVtZW50KHNlbGVjdG9yOiBzdHJpbmcsIG9mZnNldCA9IDAsIGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9FbGVtZW50KHNlbGVjdG9yLCBvZmZzZXQsIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxYVG8odG86IG51bWJlciwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxYVG8odG8sIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxZVG8odG86IG51bWJlciwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxZVG8odG8sIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcChkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvVG9wKGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0JvdHRvbShkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvQm90dG9tKGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1JpZ2h0KGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9SaWdodChkdXJhdGlvbiwgZWFzZUZ1bmMpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9MZWZ0KGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9MZWZ0KGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKCkge1xyXG4gICAgbGV0IHBhZGRpbmdCb3R0b20gPSAnMCcsIHBhZGRpbmdSaWdodCA9ICcwJywgZGlzcGxheVkgPSBmYWxzZSwgZGlzcGxheVggPSBmYWxzZTtcclxuICAgIGNvbnN0IHNpemUgPSBgY2FsYygxMDAlICsgJHt0aGlzLl9uYXRpdmVTY3JvbGxiYXJTaXplfSlgO1xyXG4gICAgaWYgKHRoaXMudHJhY2tZKSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHZlcnRpY2FsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICAgIGlmICh0aGlzLnZpZXcuc2Nyb2xsSGVpZ2h0ID4gdGhpcy52aWV3LmNsaWVudEhlaWdodCkge1xyXG4gICAgICAgIGRpc3BsYXlZID0gdHJ1ZTtcclxuICAgICAgICBwYWRkaW5nUmlnaHQgPSB0aGlzLm92ZXJsYXkgPyAnMCcgOiB0aGlzLl9uYXRpdmVTY3JvbGxiYXJTaXplO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50cmFja1gpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgaG9yaXpvbnRhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxyXG4gICAgICBpZiAodGhpcy52aWV3LnNjcm9sbFdpZHRoID4gdGhpcy52aWV3LmNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgZGlzcGxheVggPSB0cnVlO1xyXG4gICAgICAgIHBhZGRpbmdCb3R0b20gPSB0aGlzLm92ZXJsYXkgPyAnMCcgOiB0aGlzLl9uYXRpdmVTY3JvbGxiYXJTaXplO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdGF0ZS5uZXh0KHtcclxuICAgICAgdmlld1N0eWxlOiB7XHJcbiAgICAgICAgd2lkdGg6IHNpemUsXHJcbiAgICAgICAgaGVpZ2h0OiBzaXplLFxyXG4gICAgICAgIHBhZGRpbmdCb3R0b20sXHJcbiAgICAgICAgcGFkZGluZ1JpZ2h0XHJcbiAgICAgIH0sXHJcbiAgICAgIGRpc3BsYXlYLFxyXG4gICAgICBkaXNwbGF5WVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc2V0U3RhdGUoKSB7XHJcbiAgICB0aGlzLl9zdGF0ZS5uZXh0KHtcclxuICAgICAgdmlld1N0eWxlOiB7XHJcbiAgICAgICAgLi4udGhpcy5fc3RhdGUudmFsdWUudmlld1N0eWxlLFxyXG4gICAgICAgIC4uLmRlZmF1bHRTdGF0ZS52aWV3U3R5bGVcclxuICAgICAgfSxcclxuICAgICAgZGlzcGxheVg6IGRlZmF1bHRTdGF0ZS5kaXNwbGF5WCxcclxuICAgICAgZGlzcGxheVk6IGRlZmF1bHRTdGF0ZS5kaXNwbGF5WVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEluamVjdCxcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgT25EZXN0cm95LFxuICBJbnB1dCxcbiAgVmlld0NoaWxkLFxuICBOZ1pvbmUsXG4gIEVsZW1lbnRSZWYsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBmb3J3YXJkUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBPYnNlcnZhYmxlLCBCZWhhdmlvclN1YmplY3QsIFN1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uTGlrZSwgYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgdGhyb3R0bGVUaW1lLCBtZXJnZU1hcCwgcGx1Y2ssIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTmdTY3JvbGxiYXIgfSBmcm9tICcuL25nLXNjcm9sbGJhcic7XG5cbmludGVyZmFjZSBBeGlzUHJvcGVydGllcyB7XG4gIG9mZnNldFlPclg6IHN0cmluZztcbiAgc2Nyb2xsVG9wTGVmdDogc3RyaW5nO1xuICBjbGllbnRZT3JYOiBzdHJpbmc7XG4gIHRvcE9yTGVmdDogc3RyaW5nO1xuICBjbGllbnRIZWlnaHRPcldpZHRoOiBzdHJpbmc7XG4gIHNjcm9sbEhlaWdodE9yV2lkdGg6IHN0cmluZztcbiAgaGVpZ2h0T3JXaWR0aDogc3RyaW5nO1xuICB0cmFuc2Zvcm06ICh2YWw6IG51bWJlcikgPT4gc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQXhpcyB7XG4gIHZlcnRpY2FsOiBBeGlzUHJvcGVydGllcztcbiAgaG9yaXpvbnRhbDogQXhpc1Byb3BlcnRpZXM7XG59XG5cbmNvbnN0IGF4aXM6IEF4aXMgPSB7XG4gIHZlcnRpY2FsOiB7XG4gICAgdG9wT3JMZWZ0OiAndG9wJyxcbiAgICBvZmZzZXRZT3JYOiAnb2Zmc2V0WScsXG4gICAgY2xpZW50WU9yWDogJ2NsaWVudFknLFxuICAgIGhlaWdodE9yV2lkdGg6ICdoZWlnaHQnLFxuICAgIHNjcm9sbFRvcExlZnQ6ICdzY3JvbGxUb3AnLFxuICAgIGNsaWVudEhlaWdodE9yV2lkdGg6ICdjbGllbnRIZWlnaHQnLFxuICAgIHNjcm9sbEhlaWdodE9yV2lkdGg6ICdzY3JvbGxIZWlnaHQnLFxuICAgIHRyYW5zZm9ybTogKHZhbDogbnVtYmVyKSA9PiBgdHJhbnNsYXRlM2QoMCwgJHt2YWx9cHgsIDApYFxuICB9LFxuICBob3Jpem9udGFsOiB7XG4gICAgdG9wT3JMZWZ0OiAnbGVmdCcsXG4gICAgb2Zmc2V0WU9yWDogJ29mZnNldFgnLFxuICAgIGNsaWVudFlPclg6ICdjbGllbnRYJyxcbiAgICBoZWlnaHRPcldpZHRoOiAnd2lkdGgnLFxuICAgIHNjcm9sbFRvcExlZnQ6ICdzY3JvbGxMZWZ0JyxcbiAgICBjbGllbnRIZWlnaHRPcldpZHRoOiAnY2xpZW50V2lkdGgnLFxuICAgIHNjcm9sbEhlaWdodE9yV2lkdGg6ICdzY3JvbGxXaWR0aCcsXG4gICAgdHJhbnNmb3JtOiAodmFsOiBudW1iZXIpID0+IGB0cmFuc2xhdGUzZCgke3ZhbH1weCwgMCwgMClgXG4gIH1cbn07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nLXNjcm9sbGJhci10aHVtYicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgI2JhciBjbGFzcz1cIm5nLXNjcm9sbGJhciBuZy1zY3JvbGxiYXIte3tvcmllbnRhdGlvbn19IHt7YmFyQ2xhc3N9fVwiIChtb3VzZWRvd24pPVwib25TY3JvbGxiYXJDbGljaygkZXZlbnQpXCI+XG4gICAgICA8ZGl2ICN0aHVtYiBjbGFzcz1cIm5nLXNjcm9sbGJhci10aHVtYiB7e3RodW1iQ2xhc3N9fVwiIFtuZ1N0eWxlXT1cInNjcm9sbGJhclN0eWxlIHwgYXN5bmNcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYFxufSlcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhclRodW1iIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcblxuICAvKiogU2Nyb2xsYmFyIGNsYXNzICovXG4gIEBJbnB1dCgpIGJhckNsYXNzOiBzdHJpbmc7XG4gIC8qKiBTY3JvbGxiYXIgdGh1bWJuYWlsIGNsYXNzICovXG4gIEBJbnB1dCgpIHRodW1iQ2xhc3M6IHN0cmluZztcbiAgLyoqIFRoZSBzY3JvbGwgZHVyYXRpb24gd2hlbiBzY3JvbGxiYXIgKG5vdCB0aGUgdGh1bWJuYWlsKSBpcyBjbGlja2VkICovXG4gIEBJbnB1dCgpIHNjcm9sbFRvRHVyYXRpb246IG51bWJlcjtcbiAgLyoqIFNjcm9sbGJhciBvcmllbnRhdGlvbiAqL1xuICBASW5wdXQoKSBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyB8ICdob3Jpem9udGFsJztcblxuICBAVmlld0NoaWxkKCdiYXInKSBiYXI6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3RodW1iJykgdGh1bWI6IEVsZW1lbnRSZWY7XG5cbiAgcHJpdmF0ZSBfbWluVGh1bWJTaXplID0gMjA7XG4gIHByaXZhdGUgX25hdHVyYWxUaHVtYlNpemUgPSAwO1xuICBwcml2YXRlIF90aHVtYlNpemUgPSAwO1xuICBwcml2YXRlIF90cmFja01heCA9IDA7XG4gIHByaXZhdGUgX3Njcm9sbE1heCA9IDA7XG4gIHByaXZhdGUgX2N1cnJQb3MgPSAwO1xuICBwcml2YXRlIF9zY3JvbGwkOiBTdWJzY3JpcHRpb25MaWtlID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICBwcml2YXRlIF90aHVtYkRyYWckOiBTdWJzY3JpcHRpb25MaWtlID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICBwcml2YXRlIF91cGRhdGVPYnNlcnZlciQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XG4gIHByaXZhdGUgX3ZpZXc6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9zdGF0ZSA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55Pih7XG4gICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknXG4gIH0pO1xuXG4gIC8qKiBTY3JvbGxiYXIgc3R5bGVzICovXG4gIHNjcm9sbGJhclN0eWxlID0gdGhpcy5fc3RhdGUuYXNPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcHJvcGVyIHByb3BlcnRpZXMgZm9yIHNjcm9sbGJhciBvcmllbnRhdGlvblxuICAgKi9cbiAgZ2V0IGF4aXMoKTogQXhpc1Byb3BlcnRpZXMge1xuICAgIHJldHVybiBheGlzW3RoaXMub3JpZW50YXRpb25dO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBzY3JvbGxiYXIgdGh1bWJuYWlsIHNpemVcbiAgICovXG4gIGdldCB0aHVtYlNpemUoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzY3JvbGxCYXJDbGllbnRIZWlnaHRPcldpZHRoID0gdGhpcy5iYXIubmF0aXZlRWxlbWVudFt0aGlzLmF4aXMuY2xpZW50SGVpZ2h0T3JXaWR0aF07XG4gICAgY29uc3Qgdmlld0NsaWVudEhlaWdodE9yV2lkdGggPSB0aGlzLl92aWV3W3RoaXMuYXhpcy5jbGllbnRIZWlnaHRPcldpZHRoXTtcbiAgICBjb25zdCB2aWV3U2Nyb2xsSGVpZ2h0T3JXaWR0aCA9IHRoaXMuX3ZpZXdbdGhpcy5heGlzLnNjcm9sbEhlaWdodE9yV2lkdGhdO1xuICAgIHRoaXMuX25hdHVyYWxUaHVtYlNpemUgPSBzY3JvbGxCYXJDbGllbnRIZWlnaHRPcldpZHRoIC8gdmlld1Njcm9sbEhlaWdodE9yV2lkdGggKiBzY3JvbGxCYXJDbGllbnRIZWlnaHRPcldpZHRoO1xuICAgIHRoaXMuX3Njcm9sbE1heCA9IHZpZXdTY3JvbGxIZWlnaHRPcldpZHRoIC0gdmlld0NsaWVudEhlaWdodE9yV2lkdGg7XG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsQm91bmRhcmllcyh0aGlzLl9uYXR1cmFsVGh1bWJTaXplLCB0aGlzLl9zY3JvbGxNYXgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB6b25lOiBOZ1pvbmUsXG4gICAgICAgICAgICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueSxcbiAgICAgICAgICAgICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IE5nU2Nyb2xsYmFyKSkgcHJpdmF0ZSBuZ1Njcm9sbGJhcjogTmdTY3JvbGxiYXIpIHtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLl92aWV3ID0gdGhpcy5uZ1Njcm9sbGJhci5zY3JvbGxhYmxlLmdldEVsZW1lbnRSZWYoKS5uYXRpdmVFbGVtZW50O1xuICAgIC8vIFN0YXJ0IHZpZXcgc2Nyb2xsIGV2ZW50XG4gICAgdGhpcy5fc2Nyb2xsJCA9IHRoaXMubmdTY3JvbGxiYXIuc2Nyb2xsYWJsZS5lbGVtZW50U2Nyb2xsZWQoKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpKTtcblxuICAgIC8vIFN0YXJ0IHNjcm9sbGJhciB0aHVtYm5haWwgZHJhZyBldmVudHNcbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT5cbiAgICAgIHRoaXMuX3RodW1iRHJhZyQgPSB0aGlzLnN0YXJ0VGh1bWJFdmVudHMoKS5zdWJzY3JpYmUoKVxuICAgICk7XG5cbiAgICAvLyBVcGRhdGUgc2Nyb2xsYmFyIHRodW1ibmFpbCBzaXplIG9uIGNvbnRlbnQgY2hhbmdlc1xuICAgIHRoaXMuX3VwZGF0ZU9ic2VydmVyJCA9IHRoaXMubmdTY3JvbGxiYXIudXBkYXRlT2JzZXJ2ZXIucGlwZShcbiAgICAgIHRocm90dGxlVGltZSgyMDApLFxuICAgICAgdGFwKCgpID0+IHRoaXMudXBkYXRlU2Nyb2xsYmFyKCkpLFxuICAgICAgLy8gTWFrZSBzdXJlIHNjcm9sbGJhciB0aHVtYm5haWwgcG9zaXRpb24gaXMgY29ycmVjdCBhZnRlciB0aGUgbmV3IGNvbnRlbnQgaXMgcmVuZGVyZWRcbiAgICAgIGRlYm91bmNlVGltZSgyMDApLFxuICAgICAgdGFwKCgpID0+IHRoaXMudXBkYXRlU2Nyb2xsYmFyKCkpLFxuICAgICkuc3Vic2NyaWJlKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHNjcm9sbGJhclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVTY3JvbGxiYXIoKSwgMjAwKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX3Njcm9sbCQudW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLl90aHVtYkRyYWckLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5fdXBkYXRlT2JzZXJ2ZXIkLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsYmFyIGNsaWNrXG4gICAqIEBwYXJhbSBlIE1vdXNlIGV2ZW50XG4gICAqL1xuICBvblNjcm9sbGJhckNsaWNrKGU6IGFueSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBjb25zdCBvZmZzZXRZT3JYID0gZVt0aGlzLmF4aXMub2Zmc2V0WU9yWF0gLSB0aGlzLl9uYXR1cmFsVGh1bWJTaXplICogLjU7XG4gICAgICBjb25zdCB0aHVtYlBvc2l0aW9uUGVyY2VudGFnZSA9IG9mZnNldFlPclggKiAxMDAgLyB0aGlzLmJhci5uYXRpdmVFbGVtZW50W3RoaXMuYXhpcy5jbGllbnRIZWlnaHRPcldpZHRoXTtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGh1bWJQb3NpdGlvblBlcmNlbnRhZ2UgKiB0aGlzLl92aWV3W3RoaXMuYXhpcy5zY3JvbGxIZWlnaHRPcldpZHRoXSAvIDEwMDtcbiAgICAgIHRoaXMubmdTY3JvbGxiYXIuc2Nyb2xsVG8oe1t0aGlzLmF4aXMudG9wT3JMZWZ0XTogdmFsdWUsIGR1cmF0aW9uOiB0aGlzLnNjcm9sbFRvRHVyYXRpb259IGFzIGFueSkuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzY3JvbGxiYXJcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlU2Nyb2xsYmFyKCkge1xuICAgIHRoaXMuX3RodW1iU2l6ZSA9IHRoaXMudGh1bWIubmF0aXZlRWxlbWVudFt0aGlzLmF4aXMuY2xpZW50SGVpZ2h0T3JXaWR0aF07XG4gICAgdGhpcy5fdHJhY2tNYXggPSB0aGlzLmJhci5uYXRpdmVFbGVtZW50W3RoaXMuYXhpcy5jbGllbnRIZWlnaHRPcldpZHRoXSAtIHRoaXMuX3RodW1iU2l6ZTtcbiAgICB0aGlzLl9jdXJyUG9zID0gdGhpcy5fdmlld1t0aGlzLmF4aXMuc2Nyb2xsVG9wTGVmdF0gKiB0aGlzLl90cmFja01heCAvIHRoaXMuX3Njcm9sbE1heDtcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+XG4gICAgICBhbmltYXRpb25GcmFtZVNjaGVkdWxlci5zY2hlZHVsZSgoKSA9PlxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMuYXhpcy50cmFuc2Zvcm0odGhpcy5fY3VyclBvcyksXG4gICAgICAgICAgW3RoaXMuYXhpcy5oZWlnaHRPcldpZHRoXTogYCR7dGhpcy50aHVtYlNpemV9cHhgXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB2ZXJ0aWNhbCB0aHVtYiB3b3JrZXJcbiAgICovXG4gIHByaXZhdGUgc3RhcnRUaHVtYkV2ZW50cygpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IG1vdXNlRG93biQgPSBmcm9tRXZlbnQodGhpcy50aHVtYi5uYXRpdmVFbGVtZW50LCAnbW91c2Vkb3duJyk7XG4gICAgY29uc3QgbW91c2VNb3ZlJCA9IGZyb21FdmVudCh0aGlzLmRvY3VtZW50LCAnbW91c2Vtb3ZlJyk7XG4gICAgY29uc3QgbW91c2VVcCQgPSBmcm9tRXZlbnQodGhpcy5kb2N1bWVudCwgJ21vdXNldXAnKS5waXBlKFxuICAgICAgdGFwKCgpID0+IHRoaXMuZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IG51bGwpXG4gICAgKTtcbiAgICByZXR1cm4gbW91c2VEb3duJC5waXBlKFxuICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgdGhpcy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gKCkgPT4gZmFsc2U7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdHJhY2tNYXggZm9yIGJlZm9yZSBzdGFydCBkcmFnZ2luZ1xuICAgICAgICB0aGlzLl90cmFja01heCA9IHRoaXMuYmFyLm5hdGl2ZUVsZW1lbnRbdGhpcy5heGlzLmNsaWVudEhlaWdodE9yV2lkdGhdIC0gdGhpcy5fdGh1bWJTaXplO1xuICAgICAgfSksXG4gICAgICBwbHVjayh0aGlzLmF4aXMub2Zmc2V0WU9yWCksXG4gICAgICBtZXJnZU1hcCgobW91c2VEb3duT2Zmc2V0OiBudW1iZXIpID0+IG1vdXNlTW92ZSQucGlwZShcbiAgICAgICAgdGFrZVVudGlsKG1vdXNlVXAkKSxcbiAgICAgICAgcGx1Y2sodGhpcy5heGlzLmNsaWVudFlPclgpLFxuICAgICAgICB0YXAoKG1vdXNlTW92ZUNsaWVudDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0WU9yWCA9IG1vdXNlTW92ZUNsaWVudCAtIHRoaXMuYmFyLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5heGlzLnRvcE9yTGVmdF07XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9zY3JvbGxNYXggKiAob2Zmc2V0WU9yWCAtIG1vdXNlRG93bk9mZnNldCkgLyB0aGlzLl90cmFja01heDtcbiAgICAgICAgICB0aGlzLm5nU2Nyb2xsYmFyLnNjcm9sbGFibGUuc2Nyb2xsVG8oe1t0aGlzLmF4aXMudG9wT3JMZWZ0XTogdmFsdWV9KTtcbiAgICAgICAgfSlcbiAgICAgICkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2Nyb2xsYmFyIHRodW1iIHNpemVcbiAgICogQHBhcmFtIG5hdHVyYWxUaHVtYlNpemVcbiAgICogQHBhcmFtIHNjcm9sbE1heFxuICAgKi9cbiAgcHJpdmF0ZSBzY3JvbGxCb3VuZGFyaWVzKG5hdHVyYWxUaHVtYlNpemU6IG51bWJlciwgc2Nyb2xsTWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAobmF0dXJhbFRodW1iU2l6ZSA8IHRoaXMuX21pblRodW1iU2l6ZSkgPyB0aGlzLl9taW5UaHVtYlNpemUgOiBzY3JvbGxNYXggPyBuYXR1cmFsVGh1bWJTaXplIDogMDtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdGUoc3RhdGU6IGFueSkge1xuICAgIHRoaXMuX3N0YXRlLm5leHQoey4uLnRoaXMuX3N0YXRlLnZhbHVlLCAuLi5zdGF0ZX0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBTY3JvbGxpbmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jZGsvc2Nyb2xsaW5nJztcclxuaW1wb3J0IHsgTGF5b3V0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2xheW91dCc7XHJcbmltcG9ydCB7IFNtb290aFNjcm9sbE1vZHVsZSB9IGZyb20gJy4uL3Ntb290aC1zY3JvbGwvc21vb3RoLXNjcm9sbC5tb2R1bGUnO1xyXG5pbXBvcnQgeyBOZ1Njcm9sbGJhciB9IGZyb20gJy4vbmctc2Nyb2xsYmFyJztcclxuaW1wb3J0IHsgTmdTY3JvbGxiYXJUaHVtYiB9IGZyb20gJy4vbmctc2Nyb2xsYmFyLXRodW1iJztcclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgaW1wb3J0czogW1xyXG4gICAgQ29tbW9uTW9kdWxlLFxyXG4gICAgU2Nyb2xsaW5nTW9kdWxlLFxyXG4gICAgU21vb3RoU2Nyb2xsTW9kdWxlLFxyXG4gICAgTGF5b3V0TW9kdWxlXHJcbiAgXSxcclxuICBkZWNsYXJhdGlvbnM6IFtcclxuICAgIE5nU2Nyb2xsYmFyLFxyXG4gICAgTmdTY3JvbGxiYXJUaHVtYlxyXG4gIF0sXHJcbiAgZXhwb3J0czogW1xyXG4gICAgTmdTY3JvbGxiYXJcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhck1vZHVsZSB7XHJcbn1cclxuIl0sIm5hbWVzIjpbInN1cHBvcnRzU2Nyb2xsQmVoYXZpb3IiLCJmcm9tIiwib2YiLCJEaXJlY3RpdmUiLCJFbGVtZW50UmVmIiwiYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIiLCJOZ01vZHVsZSIsIlNjcm9sbGluZ01vZHVsZSIsIkJyZWFrcG9pbnRzIiwiQmVoYXZpb3JTdWJqZWN0IiwibWFwIiwiU3Vic2NyaXB0aW9uIiwiU3ViamVjdCIsInRhcCIsInRocm90dGxlVGltZSIsIkNvbXBvbmVudCIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiQnJlYWtwb2ludE9ic2VydmVyIiwiSW5wdXQiLCJWaWV3Q2hpbGQiLCJDZGtTY3JvbGxhYmxlIiwiSG9zdEJpbmRpbmciLCJkZWJvdW5jZVRpbWUiLCJmcm9tRXZlbnQiLCJwbHVjayIsIm1lcmdlTWFwIiwidGFrZVVudGlsIiwiTmdab25lIiwiSW5qZWN0IiwiRE9DVU1FTlQiLCJmb3J3YXJkUmVmIiwiQ29tbW9uTW9kdWxlIiwiTGF5b3V0TW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7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