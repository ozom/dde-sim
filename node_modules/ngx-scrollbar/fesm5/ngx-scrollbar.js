import { Directive, ElementRef, NgModule, Component, Input, HostBinding, ViewChild, ChangeDetectionStrategy, Inject, NgZone, forwardRef } from '@angular/core';
import { supportsScrollBehavior } from '@angular/cdk/platform';
import { from, of, animationFrameScheduler, Subject, BehaviorSubject, Subscription, fromEvent } from 'rxjs';
import { ScrollingModule, CdkScrollable } from '@angular/cdk/scrolling';
import { __assign } from 'tslib';
import { BreakpointObserver, Breakpoints, LayoutModule } from '@angular/cdk/layout';
import { map, tap, throttleTime, debounceTime, mergeMap, pluck, takeUntil } from 'rxjs/operators';
import { DOCUMENT, CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var SmoothScroll = /** @class */ (function () {
    function SmoothScroll(el) {
        this.view = el.nativeElement;
    }
    /**
     * @param {?} left
     * @param {?} top
     * @return {?}
     */
    SmoothScroll.prototype.scrollFunc = /**
     * @param {?} left
     * @param {?} top
     * @return {?}
     */
    function (left, top) {
        if (supportsScrollBehavior()) {
            this.view.scrollTo({ top: top, left: left });
        }
        else {
            this.view.scrollTop = top;
            this.view.scrollLeft = left;
        }
    };
    /**
     * @param {?} options
     * @return {?}
     */
    SmoothScroll.prototype.scrollTo = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        var _this = this;
        /** @type {?} */
        var scrollFunc = function (left, top) {
            if (supportsScrollBehavior()) {
                _this.view.scrollTo({ top: top, left: left });
            }
            else {
                _this.view.scrollTop = top;
                _this.view.scrollLeft = left;
            }
        };
        if (options.duration) {
            /** @type {?} */
            var smoothScrollOptions = {
                top: options.top,
                left: options.left,
                duration: options.duration,
                easeFunc: options.easeFunc || easeInOutQuad,
                offsetTop: this.view.scrollTop,
                offsetLeft: this.view.scrollLeft,
                scrollFunc: scrollFunc
            };
            return from(smoothScroll(smoothScrollOptions));
        }
        this.scrollFunc(options.left, options.top);
        return of();
    };
    /**
     * @param {?} selector
     * @param {?=} offset
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollToElement = /**
     * @param {?} selector
     * @param {?=} offset
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (selector, offset, duration, easeFunc) {
        if (offset === void 0) { offset = 0; }
        /** @type {?} */
        var target = this.view.querySelector(selector);
        return target ? this.scrollTo({ left: target.offsetLeft, top: target.offsetTop - offset, duration: duration, easeFunc: easeFunc }) : of();
    };
    /**
     * @param {?} left
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollXTo = /**
     * @param {?} left
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (left, duration, easeFunc) {
        return this.scrollTo({ left: left, duration: duration, easeFunc: easeFunc });
    };
    /**
     * @param {?} top
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollYTo = /**
     * @param {?} top
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (top, duration, easeFunc) {
        return this.scrollTo({ top: top, duration: duration, easeFunc: easeFunc });
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollToTop = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.scrollYTo(0, duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollToBottom = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.scrollYTo(this.view.scrollHeight, duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollToRight = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.scrollXTo(this.view.scrollWidth, duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    SmoothScroll.prototype.scrollToLeft = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.scrollXTo(0, duration, easeFunc);
    };
    SmoothScroll.decorators = [
        { type: Directive, args: [{
                    selector: '[smoothScroll], [smooth-scroll]'
                },] }
    ];
    /** @nocollapse */
    SmoothScroll.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    return SmoothScroll;
}());
/**
 * @param {?} options
 * @return {?}
 */
function smoothScroll(options) {
    return new Promise(function (resolve) {
        /** @type {?} */
        var currentTime = 0;
        /** @type {?} */
        var increment = 20;
        /** @type {?} */
        var valX = options.offsetLeft;
        /** @type {?} */
        var valY = options.offsetTop;
        /** @type {?} */
        var animateScroll = function () {
            // increment the time
            currentTime += increment;
            // find the value with the easing function
            if (typeof options.left !== 'undefined') {
                /** @type {?} */
                var deltaX = options.left - options.offsetLeft;
                valX = options.easeFunc(currentTime, options.offsetLeft, deltaX, options.duration);
            }
            if (typeof options.top !== 'undefined') {
                /** @type {?} */
                var deltaY = options.top - options.offsetTop;
                valY = options.easeFunc(currentTime, options.offsetTop, deltaY, options.duration);
            }
            // scroll to position
            options.scrollFunc(valX, valY);
            // do the animation unless its over
            if (currentTime < options.duration) {
                animationFrameScheduler.schedule(animateScroll);
            }
            else {
                resolve();
            }
        };
        animateScroll();
    });
}
/**
 * @param {?} t
 * @param {?} b
 * @param {?} c
 * @param {?} d
 * @return {?}
 */
function easeInOutQuad(t, b, c, d) {
    t /= d / 2;
    if (t < 1) {
        return (c / 2) * t * t + b;
    }
    t--;
    return (-c / 2) * (t * (t - 2) - 1) + b;
}
/**
 * @param {?} t
 * @param {?} b
 * @param {?} c
 * @param {?} d
 * @return {?}
 */
function easeInCubic(t, b, c, d) {
    /** @type {?} */
    var tc = (t /= d) * t * t;
    return b + c * tc;
}
/**
 * @param {?} t
 * @param {?} b
 * @param {?} c
 * @param {?} d
 * @return {?}
 */
function inOutQuintic(t, b, c, d) {
    /** @type {?} */
    var ts = (t /= d) * t;
    /** @type {?} */
    var tc = ts * t;
    return b + c * (6 * tc * ts + -15 * ts * ts + 10 * tc);
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var SmoothScrollModule = /** @class */ (function () {
    function SmoothScrollModule() {
    }
    SmoothScrollModule.decorators = [
        { type: NgModule, args: [{
                    imports: [ScrollingModule],
                    declarations: [SmoothScroll],
                    exports: [SmoothScroll]
                },] }
    ];
    return SmoothScrollModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var defaultState = {
    viewStyle: {
        paddingRight: '0',
        paddingBottom: '0',
    },
    displayX: false,
    displayY: false
};
var NgScrollbar = /** @class */ (function () {
    function NgScrollbar(breakpointObserver) {
        this.breakpointObserver = breakpointObserver;
        /**
         * Horizontal custom scrollbar
         */
        this.trackX = false;
        /**
         * Vertical custom Scrollbar
         */
        this.trackY = true;
        /**
         * Auto hide scrollbars on mouse leave
         */
        this.autoHide = false;
        /**
         * Auto update scrollbars on content changes (Mutation Observer)
         */
        this.autoUpdate = true;
        /**
         * The smooth scroll duration when a scrollbar is clicked
         */
        this.scrollToDuration = 400;
        /**
         * Disable custom scrollbars on specific breakpoints
         */
        this.disableOnBreakpoints = [
            Breakpoints.HandsetLandscape,
            Breakpoints.HandsetPortrait
        ];
        this.disabled = false;
        /**
         * Scrollbar state
         */
        this._state = new BehaviorSubject(defaultState);
        this.viewStyle = this._state.pipe(map(function (state) { return state.viewStyle; }));
        this.displayX = this._state.pipe(map(function (state) { return state.displayX; }));
        this.displayY = this._state.pipe(map(function (state) { return state.displayY; }));
        /**
         * Mutation observer subscription
         */
        this._updateObserverSub$ = Subscription.EMPTY;
        /**
         * CDK breakpoint subscription
         */
        this._breakpointSub$ = Subscription.EMPTY;
        /**
         * Steam that emits when scrollbar thumbnail needs to update (for internal uses)
         */
        this._updateObserver = new Subject();
        this.updateObserver = this._updateObserver.asObservable();
    }
    Object.defineProperty(NgScrollbar.prototype, "disableScrollbars", {
        /** Disable custom scrollbars and switch back to native scrollbars */
        set: /**
         * Disable custom scrollbars and switch back to native scrollbars
         * @param {?} disable
         * @return {?}
         */
        function (disable) {
            disable ? this.disable() : this.enable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbar.prototype, "autoHideClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this.autoHide;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgScrollbar.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.view = this.scrollable.getElementRef().nativeElement;
        if (this.disableOnBreakpoints) {
            // Enable/Disable custom scrollbar on breakpoints (Used to disable scrollbars on mobile phones)
            this._breakpointSub$ = this.breakpointObserver.observe(this.disableOnBreakpoints).pipe(
            // filter(() => this.viewInitialized),
            tap(function (result) { return result.matches ? _this.disable() : _this.enable(); })).subscribe();
        }
        else {
            this.enable();
        }
        // Update state on content changes
        this._updateObserverSub$ = this.updateObserver.pipe(throttleTime(200), tap(function () { return _this.updateState(); })).subscribe();
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._breakpointSub$.unsubscribe();
        this._updateObserverSub$.unsubscribe();
        if (this._observer) {
            this._observer.disconnect();
        }
    };
    /**
     * Update scrollbar thumbnail position
     */
    /**
     * Update scrollbar thumbnail position
     * @return {?}
     */
    NgScrollbar.prototype.update = /**
     * Update scrollbar thumbnail position
     * @return {?}
     */
    function () {
        if (!this.disabled) {
            this._updateObserver.next();
        }
    };
    /**
     * Enable custom scrollbar
     */
    /**
     * Enable custom scrollbar
     * @return {?}
     */
    NgScrollbar.prototype.enable = /**
     * Enable custom scrollbar
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.view) {
            this.disabled = false;
            // Hide native scrollbars
            this._nativeScrollbarSize = this.view.offsetWidth - this.view.clientWidth + 1 + "px";
            this.updateState();
            if (this.autoUpdate) {
                // Observe content changes
                this._observer = new MutationObserver(function () { return _this.update(); });
                this._observer.observe(this.view, { subtree: true, childList: true, characterData: true });
            }
        }
    };
    /**
     * Disable custom scrollbar
     */
    /**
     * Disable custom scrollbar
     * @return {?}
     */
    NgScrollbar.prototype.disable = /**
     * Disable custom scrollbar
     * @return {?}
     */
    function () {
        this.disabled = true;
        // Show Native Scrollbars
        this.resetState();
        if (this._observer) {
            this._observer.disconnect();
        }
    };
    /**
     * @param {?} options
     * @return {?}
     */
    NgScrollbar.prototype.scrollTo = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.smoothScroll.scrollTo(options);
    };
    /**
     * @param {?} selector
     * @param {?=} offset
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollToElement = /**
     * @param {?} selector
     * @param {?=} offset
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (selector, offset, duration, easeFunc) {
        if (offset === void 0) { offset = 0; }
        return this.smoothScroll.scrollToElement(selector, offset, duration, easeFunc);
    };
    /**
     * @param {?} to
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollXTo = /**
     * @param {?} to
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (to, duration, easeFunc) {
        return this.smoothScroll.scrollXTo(to, duration, easeFunc);
    };
    /**
     * @param {?} to
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollYTo = /**
     * @param {?} to
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (to, duration, easeFunc) {
        return this.smoothScroll.scrollYTo(to, duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollToTop = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.smoothScroll.scrollToTop(duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollToBottom = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.smoothScroll.scrollToBottom(duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollToRight = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.smoothScroll.scrollToRight(duration, easeFunc);
    };
    /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    NgScrollbar.prototype.scrollToLeft = /**
     * @param {?=} duration
     * @param {?=} easeFunc
     * @return {?}
     */
    function (duration, easeFunc) {
        return this.smoothScroll.scrollToLeft(duration, easeFunc);
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.updateState = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var paddingBottom = '0';
        /** @type {?} */
        var paddingRight = '0';
        /** @type {?} */
        var displayY = false;
        /** @type {?} */
        var displayX = false;
        /** @type {?} */
        var size = "calc(100% + " + this._nativeScrollbarSize + ")";
        if (this.trackY) {
            // Check if vertical scrollbar should be displayed
            if (this.view.scrollHeight > this.view.clientHeight) {
                displayY = true;
                paddingRight = this.overlay ? '0' : this._nativeScrollbarSize;
            }
        }
        if (this.trackX) {
            // Check if horizontal scrollbar should be displayed
            if (this.view.scrollWidth > this.view.clientWidth) {
                displayX = true;
                paddingBottom = this.overlay ? '0' : this._nativeScrollbarSize;
            }
        }
        this._state.next({
            viewStyle: {
                width: size,
                height: size,
                paddingBottom: paddingBottom,
                paddingRight: paddingRight
            },
            displayX: displayX,
            displayY: displayY
        });
    };
    /**
     * @return {?}
     */
    NgScrollbar.prototype.resetState = /**
     * @return {?}
     */
    function () {
        this._state.next({
            viewStyle: __assign({}, this._state.value.viewStyle, defaultState.viewStyle),
            displayX: defaultState.displayX,
            displayY: defaultState.displayY
        });
    };
    NgScrollbar.decorators = [
        { type: Component, args: [{
                    selector: 'ng-scrollbar',
                    template: "<div class=\"ng-scrollbar-container\">\r\n\r\n  <div cdkScrollable smoothScroll class=\"ng-scrollbar-view {{viewClass}}\" [ngStyle]=\"viewStyle | async\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n\r\n  <ng-scrollbar-thumb #vertical\r\n                      *ngIf=\"!disabled && trackY\"\r\n                      orientation=\"vertical\"\r\n                      [class.ng-scrollbar-visible]=\"displayY | async\"\r\n                      [barClass]=\"barClass\"\r\n                      [thumbClass]=\"thumbClass\"\r\n                      [scrollToDuration]=\"scrollToDuration\">\r\n  </ng-scrollbar-thumb>\r\n\r\n  <ng-scrollbar-thumb #horizontal\r\n                      *ngIf=\"!disabled && trackX\"\r\n                      orientation=\"horizontal\"\r\n                      [class.ng-scrollbar-visible]=\"displayX | async\"\r\n                      [barClass]=\"barClass\"\r\n                      [thumbClass]=\"thumbClass\"\r\n                      [scrollToDuration]=\"scrollToDuration\">\r\n  </ng-scrollbar-thumb>\r\n\r\n</div>\r\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host{display:block;overflow:hidden}.ng-scrollbar-container,.ng-scrollbar-view,:host{position:relative;height:100%;width:100%}.ng-scrollbar-container{overflow:hidden;top:0;left:0}.ng-scrollbar-view{overflow:scroll;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-overflow-scrolling:touch}.ng-scrollbar-view ::-webkit-scrollbar{background:0 0}ng-scrollbar-thumb{display:none}ng-scrollbar-thumb.ng-scrollbar-visible{display:block}::ng-deep .ng-scrollbar-auto-hide .ng-scrollbar{opacity:0;transition:opacity 120ms ease-out}::ng-deep .ng-scrollbar-auto-hide:active .ng-scrollbar,::ng-deep .ng-scrollbar-auto-hide:focus .ng-scrollbar,::ng-deep .ng-scrollbar-auto-hide:hover .ng-scrollbar{opacity:1;transition:opacity 340ms ease-out}::ng-deep .ng-scrollbar{position:absolute;z-index:1;border-radius:4px}::ng-deep .ng-scrollbar-thumb{position:relative;width:0;height:0;border-radius:inherit;background-color:rgba(0,0,0,.2);-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:height 150ms ease-out}::ng-deep .ng-scrollbar-thumb:active,::ng-deep .ng-scrollbar-thumb:hover{background-color:rgba(0,0,0,.3)}::ng-deep .ng-scrollbar-vertical{right:6px;top:6px;bottom:6px;width:8px}::ng-deep .ng-scrollbar-vertical .ng-scrollbar-thumb{width:100%}::ng-deep .ng-scrollbar-horizontal{left:6px;right:6px;bottom:6px;height:8px}::ng-deep .ng-scrollbar-horizontal .ng-scrollbar-thumb{height:100%}"]
                }] }
    ];
    /** @nocollapse */
    NgScrollbar.ctorParameters = function () { return [
        { type: BreakpointObserver }
    ]; };
    NgScrollbar.propDecorators = {
        trackX: [{ type: Input }],
        trackY: [{ type: Input }],
        autoHide: [{ type: Input }],
        autoUpdate: [{ type: Input }],
        viewClass: [{ type: Input }],
        barClass: [{ type: Input }],
        thumbClass: [{ type: Input }],
        scrollToDuration: [{ type: Input }],
        overlay: [{ type: Input }],
        disableOnBreakpoints: [{ type: Input }],
        disableScrollbars: [{ type: Input, args: ['disabled',] }],
        scrollable: [{ type: ViewChild, args: [CdkScrollable,] }],
        smoothScroll: [{ type: ViewChild, args: [SmoothScroll,] }],
        verticalScrollbar: [{ type: ViewChild, args: ['vertical', { read: ElementRef },] }],
        horizontalScrollbar: [{ type: ViewChild, args: ['horizontal', { read: ElementRef },] }],
        autoHideClass: [{ type: HostBinding, args: ['class.ng-scrollbar-auto-hide',] }]
    };
    return NgScrollbar;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ɵ0 = function (val) { return "translate3d(0, " + val + "px, 0)"; }, ɵ1 = function (val) { return "translate3d(" + val + "px, 0, 0)"; };
/** @type {?} */
var axis = {
    vertical: {
        topOrLeft: 'top',
        offsetYOrX: 'offsetY',
        clientYOrX: 'clientY',
        heightOrWidth: 'height',
        scrollTopLeft: 'scrollTop',
        clientHeightOrWidth: 'clientHeight',
        scrollHeightOrWidth: 'scrollHeight',
        transform: ɵ0
    },
    horizontal: {
        topOrLeft: 'left',
        offsetYOrX: 'offsetX',
        clientYOrX: 'clientX',
        heightOrWidth: 'width',
        scrollTopLeft: 'scrollLeft',
        clientHeightOrWidth: 'clientWidth',
        scrollHeightOrWidth: 'scrollWidth',
        transform: ɵ1
    }
};
var NgScrollbarThumb = /** @class */ (function () {
    function NgScrollbarThumb(zone, document, ngScrollbar) {
        this.zone = zone;
        this.document = document;
        this.ngScrollbar = ngScrollbar;
        this._minThumbSize = 20;
        this._naturalThumbSize = 0;
        this._thumbSize = 0;
        this._trackMax = 0;
        this._scrollMax = 0;
        this._currPos = 0;
        this._scroll$ = Subscription.EMPTY;
        this._thumbDrag$ = Subscription.EMPTY;
        this._updateObserver$ = Subscription.EMPTY;
        this._state = new BehaviorSubject({
            transform: 'translate3d(0, 0, 0)'
        });
        /**
         * Scrollbar styles
         */
        this.scrollbarStyle = this._state.asObservable();
    }
    Object.defineProperty(NgScrollbarThumb.prototype, "axis", {
        /**
         * Get the proper properties for scrollbar orientation
         */
        get: /**
         * Get the proper properties for scrollbar orientation
         * @return {?}
         */
        function () {
            return axis[this.orientation];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgScrollbarThumb.prototype, "thumbSize", {
        /**
         * Calculate scrollbar thumbnail size
         */
        get: /**
         * Calculate scrollbar thumbnail size
         * @return {?}
         */
        function () {
            /** @type {?} */
            var scrollBarClientHeightOrWidth = this.bar.nativeElement[this.axis.clientHeightOrWidth];
            /** @type {?} */
            var viewClientHeightOrWidth = this._view[this.axis.clientHeightOrWidth];
            /** @type {?} */
            var viewScrollHeightOrWidth = this._view[this.axis.scrollHeightOrWidth];
            this._naturalThumbSize = scrollBarClientHeightOrWidth / viewScrollHeightOrWidth * scrollBarClientHeightOrWidth;
            this._scrollMax = viewScrollHeightOrWidth - viewClientHeightOrWidth;
            return this.scrollBoundaries(this._naturalThumbSize, this._scrollMax);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgScrollbarThumb.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this._view = this.ngScrollbar.scrollable.getElementRef().nativeElement;
        // Start view scroll event
        this._scroll$ = this.ngScrollbar.scrollable.elementScrolled()
            .subscribe(function () { return _this.updateScrollbar(); });
        // Start scrollbar thumbnail drag events
        this.zone.runOutsideAngular(function () {
            return _this._thumbDrag$ = _this.startThumbEvents().subscribe();
        });
        // Update scrollbar thumbnail size on content changes
        this._updateObserver$ = this.ngScrollbar.updateObserver.pipe(throttleTime(200), tap(function () { return _this.updateScrollbar(); }), 
        // Make sure scrollbar thumbnail position is correct after the new content is rendered
        debounceTime(200), tap(function () { return _this.updateScrollbar(); })).subscribe();
        // Initialize scrollbar
        setTimeout(function () { return _this.updateScrollbar(); }, 200);
    };
    /**
     * @return {?}
     */
    NgScrollbarThumb.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._scroll$.unsubscribe();
        this._thumbDrag$.unsubscribe();
        this._updateObserver$.unsubscribe();
    };
    /**
     * Scrollbar click
     * @param e Mouse event
     */
    /**
     * Scrollbar click
     * @param {?} e Mouse event
     * @return {?}
     */
    NgScrollbarThumb.prototype.onScrollbarClick = /**
     * Scrollbar click
     * @param {?} e Mouse event
     * @return {?}
     */
    function (e) {
        var _a;
        if (e.target === e.currentTarget) {
            /** @type {?} */
            var offsetYOrX = e[this.axis.offsetYOrX] - this._naturalThumbSize * .5;
            /** @type {?} */
            var thumbPositionPercentage = offsetYOrX * 100 / this.bar.nativeElement[this.axis.clientHeightOrWidth];
            /** @type {?} */
            var value = thumbPositionPercentage * this._view[this.axis.scrollHeightOrWidth] / 100;
            this.ngScrollbar.scrollTo(/** @type {?} */ (_a = {}, _a[this.axis.topOrLeft] = value, _a.duration = this.scrollToDuration, _a)).subscribe();
        }
    };
    /**
     * Update scrollbar
     * @return {?}
     */
    NgScrollbarThumb.prototype.updateScrollbar = /**
     * Update scrollbar
     * @return {?}
     */
    function () {
        var _this = this;
        this._thumbSize = this.thumb.nativeElement[this.axis.clientHeightOrWidth];
        this._trackMax = this.bar.nativeElement[this.axis.clientHeightOrWidth] - this._thumbSize;
        this._currPos = this._view[this.axis.scrollTopLeft] * this._trackMax / this._scrollMax;
        this.zone.run(function () {
            return animationFrameScheduler.schedule(function () {
                var _a;
                return _this.updateState((_a = {
                        transform: _this.axis.transform(_this._currPos)
                    },
                    _a[_this.axis.heightOrWidth] = _this.thumbSize + "px",
                    _a));
            });
        });
    };
    /**
     * Start vertical thumb worker
     * @return {?}
     */
    NgScrollbarThumb.prototype.startThumbEvents = /**
     * Start vertical thumb worker
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var mouseDown$ = fromEvent(this.thumb.nativeElement, 'mousedown');
        /** @type {?} */
        var mouseMove$ = fromEvent(this.document, 'mousemove');
        /** @type {?} */
        var mouseUp$ = fromEvent(this.document, 'mouseup').pipe(tap(function () { return _this.document.onselectstart = null; }));
        return mouseDown$.pipe(tap(function () {
            _this.document.onselectstart = function () { return false; };
            // Initialize trackMax for before start dragging
            _this._trackMax = _this.bar.nativeElement[_this.axis.clientHeightOrWidth] - _this._thumbSize;
        }), pluck(this.axis.offsetYOrX), mergeMap(function (mouseDownOffset) { return mouseMove$.pipe(takeUntil(mouseUp$), pluck(_this.axis.clientYOrX), tap(function (mouseMoveClient) {
            var _a;
            /** @type {?} */
            var offsetYOrX = mouseMoveClient - _this.bar.nativeElement.getBoundingClientRect()[_this.axis.topOrLeft];
            /** @type {?} */
            var value = _this._scrollMax * (offsetYOrX - mouseDownOffset) / _this._trackMax;
            _this.ngScrollbar.scrollable.scrollTo((_a = {}, _a[_this.axis.topOrLeft] = value, _a));
        })); }));
    };
    /**
     * Get scrollbar thumb size
     * @param {?} naturalThumbSize
     * @param {?} scrollMax
     * @return {?}
     */
    NgScrollbarThumb.prototype.scrollBoundaries = /**
     * Get scrollbar thumb size
     * @param {?} naturalThumbSize
     * @param {?} scrollMax
     * @return {?}
     */
    function (naturalThumbSize, scrollMax) {
        return (naturalThumbSize < this._minThumbSize) ? this._minThumbSize : scrollMax ? naturalThumbSize : 0;
    };
    /**
     * @param {?} state
     * @return {?}
     */
    NgScrollbarThumb.prototype.updateState = /**
     * @param {?} state
     * @return {?}
     */
    function (state) {
        this._state.next(__assign({}, this._state.value, state));
    };
    NgScrollbarThumb.decorators = [
        { type: Component, args: [{
                    selector: 'ng-scrollbar-thumb',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    template: "\n    <div #bar class=\"ng-scrollbar ng-scrollbar-{{orientation}} {{barClass}}\" (mousedown)=\"onScrollbarClick($event)\">\n      <div #thumb class=\"ng-scrollbar-thumb {{thumbClass}}\" [ngStyle]=\"scrollbarStyle | async\"></div>\n    </div>\n  "
                }] }
    ];
    /** @nocollapse */
    NgScrollbarThumb.ctorParameters = function () { return [
        { type: NgZone },
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },
        { type: NgScrollbar, decorators: [{ type: Inject, args: [forwardRef(function () { return NgScrollbar; }),] }] }
    ]; };
    NgScrollbarThumb.propDecorators = {
        barClass: [{ type: Input }],
        thumbClass: [{ type: Input }],
        scrollToDuration: [{ type: Input }],
        orientation: [{ type: Input }],
        bar: [{ type: ViewChild, args: ['bar',] }],
        thumb: [{ type: ViewChild, args: ['thumb',] }]
    };
    return NgScrollbarThumb;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var NgScrollbarModule = /** @class */ (function () {
    function NgScrollbarModule() {
    }
    NgScrollbarModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        ScrollingModule,
                        SmoothScrollModule,
                        LayoutModule
                    ],
                    declarations: [
                        NgScrollbar,
                        NgScrollbarThumb
                    ],
                    exports: [
                        NgScrollbar
                    ]
                },] }
    ];
    return NgScrollbarModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { NgScrollbarModule, NgScrollbar, SmoothScrollModule, smoothScroll, easeInOutQuad, easeInCubic, inOutQuintic, SmoothScroll, NgScrollbarThumb as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNjcm9sbGJhci5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsL3Ntb290aC1zY3JvbGwudHMiLCJuZzovL25neC1zY3JvbGxiYXIvc21vb3RoLXNjcm9sbC9zbW9vdGgtc2Nyb2xsLm1vZHVsZS50cyIsIm5nOi8vbmd4LXNjcm9sbGJhci9zY3JvbGxiYXIvbmctc2Nyb2xsYmFyLnRzIiwibmc6Ly9uZ3gtc2Nyb2xsYmFyL3Njcm9sbGJhci9uZy1zY3JvbGxiYXItdGh1bWIudHMiLCJuZzovL25neC1zY3JvbGxiYXIvc2Nyb2xsYmFyL25nLXNjcm9sbGJhci5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IHN1cHBvcnRzU2Nyb2xsQmVoYXZpb3IgfSBmcm9tICdAYW5ndWxhci9jZGsvcGxhdGZvcm0nO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tLCBvZiwgYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIgfSBmcm9tICdyeGpzJztcclxuXHJcbmV4cG9ydCB0eXBlIFNtb290aFNjcm9sbEVhc2VGdW5jID0gKHQ6IG51bWJlciwgczogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlcikgPT4gbnVtYmVyO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTbW9vdGhTY3JvbGxPcHRpb25zIHtcclxuICB0b3A/OiBudW1iZXI7XHJcbiAgbGVmdD86IG51bWJlcjtcclxuICBvZmZzZXRUb3A6IG51bWJlcjtcclxuICBvZmZzZXRMZWZ0OiBudW1iZXI7XHJcbiAgZHVyYXRpb246IG51bWJlcjtcclxuICBzY3JvbGxGdW5jOiAodG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlcikgPT4gdm9pZDtcclxuICBlYXNlRnVuYzogU21vb3RoU2Nyb2xsRWFzZUZ1bmM7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsVG9PcHRpb25zIHtcclxuICB0b3A/OiBudW1iZXI7XHJcbiAgbGVmdD86IG51bWJlcjtcclxuICBkdXJhdGlvbj86IG51bWJlcjtcclxuICBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jO1xyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tzbW9vdGhTY3JvbGxdLCBbc21vb3RoLXNjcm9sbF0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTbW9vdGhTY3JvbGwge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IHZpZXc6IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbDogRWxlbWVudFJlZikge1xyXG4gICAgdGhpcy52aWV3ID0gZWwubmF0aXZlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2Nyb2xsRnVuYyhsZWZ0OiBudW1iZXIsIHRvcDogbnVtYmVyKSB7XHJcbiAgICBpZiAoc3VwcG9ydHNTY3JvbGxCZWhhdmlvcigpKSB7XHJcbiAgICAgIHRoaXMudmlldy5zY3JvbGxUbyh7dG9wLCBsZWZ0fSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9wID0gdG9wO1xyXG4gICAgICB0aGlzLnZpZXcuc2Nyb2xsTGVmdCA9IGxlZnQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUbyhvcHRpb25zOiBTY3JvbGxUb09wdGlvbnMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHNjcm9sbEZ1bmMgPSAobGVmdDogbnVtYmVyLCB0b3A6IG51bWJlcikgPT4ge1xyXG4gICAgICBpZiAoc3VwcG9ydHNTY3JvbGxCZWhhdmlvcigpKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvKHt0b3AsIGxlZnR9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9wID0gdG9wO1xyXG4gICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gbGVmdDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChvcHRpb25zLmR1cmF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHNtb290aFNjcm9sbE9wdGlvbnM6IFNtb290aFNjcm9sbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgdG9wOiBvcHRpb25zLnRvcCxcclxuICAgICAgICBsZWZ0OiBvcHRpb25zLmxlZnQsXHJcbiAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXHJcbiAgICAgICAgZWFzZUZ1bmM6IG9wdGlvbnMuZWFzZUZ1bmMgfHwgZWFzZUluT3V0UXVhZCxcclxuICAgICAgICBvZmZzZXRUb3A6IHRoaXMudmlldy5zY3JvbGxUb3AsXHJcbiAgICAgICAgb2Zmc2V0TGVmdDogdGhpcy52aWV3LnNjcm9sbExlZnQsXHJcbiAgICAgICAgc2Nyb2xsRnVuY1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gZnJvbShzbW9vdGhTY3JvbGwoc21vb3RoU2Nyb2xsT3B0aW9ucykpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zY3JvbGxGdW5jKG9wdGlvbnMubGVmdCwgb3B0aW9ucy50b3ApO1xyXG4gICAgcmV0dXJuIG9mPHZvaWQ+KCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0VsZW1lbnQoc2VsZWN0b3I6IHN0cmluZywgb2Zmc2V0ID0gMCwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHRhcmdldDogSFRNTEVsZW1lbnQgPSB0aGlzLnZpZXcucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICByZXR1cm4gdGFyZ2V0ID8gdGhpcy5zY3JvbGxUbyh7bGVmdDogdGFyZ2V0Lm9mZnNldExlZnQsIHRvcDogdGFyZ2V0Lm9mZnNldFRvcCAtIG9mZnNldCwgZHVyYXRpb24sIGVhc2VGdW5jfSkgOiBvZjx2b2lkPigpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsWFRvKGxlZnQ6IG51bWJlciwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNjcm9sbFRvKHtsZWZ0LCBkdXJhdGlvbiwgZWFzZUZ1bmN9KTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFlUbyh0b3A6IG51bWJlciwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNjcm9sbFRvKHt0b3AsIGR1cmF0aW9uLCBlYXNlRnVuY30pO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9Ub3AoZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNjcm9sbFlUbygwLCBkdXJhdGlvbiwgZWFzZUZ1bmMpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9Cb3R0b20oZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNjcm9sbFlUbyh0aGlzLnZpZXcuc2Nyb2xsSGVpZ2h0LCBkdXJhdGlvbiwgZWFzZUZ1bmMpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9SaWdodChkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsWFRvKHRoaXMudmlldy5zY3JvbGxXaWR0aCwgZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvTGVmdChkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsWFRvKDAsIGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsKG9wdGlvbnM6IFNtb290aFNjcm9sbE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICBsZXQgY3VycmVudFRpbWUgPSAwO1xyXG4gICAgY29uc3QgaW5jcmVtZW50ID0gMjA7XHJcbiAgICBsZXQgdmFsWCA9IG9wdGlvbnMub2Zmc2V0TGVmdDtcclxuICAgIGxldCB2YWxZID0gb3B0aW9ucy5vZmZzZXRUb3A7XHJcblxyXG4gICAgY29uc3QgYW5pbWF0ZVNjcm9sbCA9ICgpID0+IHtcclxuICAgICAgLy8gaW5jcmVtZW50IHRoZSB0aW1lXHJcbiAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcclxuICAgICAgLy8gZmluZCB0aGUgdmFsdWUgd2l0aCB0aGUgZWFzaW5nIGZ1bmN0aW9uXHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sZWZ0ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IG9wdGlvbnMubGVmdCAtIG9wdGlvbnMub2Zmc2V0TGVmdDtcclxuICAgICAgICB2YWxYID0gb3B0aW9ucy5lYXNlRnVuYyhjdXJyZW50VGltZSwgb3B0aW9ucy5vZmZzZXRMZWZ0LCBkZWx0YVgsIG9wdGlvbnMuZHVyYXRpb24pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50b3AgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc3QgZGVsdGFZID0gb3B0aW9ucy50b3AgLSBvcHRpb25zLm9mZnNldFRvcDtcclxuICAgICAgICB2YWxZID0gb3B0aW9ucy5lYXNlRnVuYyhjdXJyZW50VGltZSwgb3B0aW9ucy5vZmZzZXRUb3AsIGRlbHRhWSwgb3B0aW9ucy5kdXJhdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gc2Nyb2xsIHRvIHBvc2l0aW9uXHJcbiAgICAgIG9wdGlvbnMuc2Nyb2xsRnVuYyh2YWxYLCB2YWxZKTtcclxuICAgICAgLy8gZG8gdGhlIGFuaW1hdGlvbiB1bmxlc3MgaXRzIG92ZXJcclxuICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgb3B0aW9ucy5kdXJhdGlvbikge1xyXG4gICAgICAgIGFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyLnNjaGVkdWxlKGFuaW1hdGVTY3JvbGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGFuaW1hdGVTY3JvbGwoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gZWFzaW5nIGZ1bmN0aW9ucyBodHRwOi8vZ29vLmdsLzVITGw4XHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW5PdXRRdWFkKHQ6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlcikge1xyXG4gIHQgLz0gZCAvIDI7XHJcbiAgaWYgKHQgPCAxKSB7XHJcbiAgICByZXR1cm4gKGMgLyAyKSAqIHQgKiB0ICsgYjtcclxuICB9XHJcbiAgdC0tO1xyXG4gIHJldHVybiAoLWMgLyAyKSAqICh0ICogKHQgLSAyKSAtIDEpICsgYjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbkN1YmljKHQ6IG51bWJlciwgYjogbnVtYmVyLCBjOiBudW1iZXIsIGQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHRjID0gKHQgLz0gZCkgKiB0ICogdDtcclxuICByZXR1cm4gYiArIGMgKiB0YztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluT3V0UXVpbnRpYyh0OiBudW1iZXIsIGI6IG51bWJlciwgYzogbnVtYmVyLCBkOiBudW1iZXIpIHtcclxuICBjb25zdCB0cyA9ICh0IC89IGQpICogdCxcclxuICAgIHRjID0gdHMgKiB0O1xyXG4gIHJldHVybiBiICsgYyAqICg2ICogdGMgKiB0cyArIC0xNSAqIHRzICogdHMgKyAxMCAqIHRjKTtcclxufVxyXG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTY3JvbGxpbmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jZGsvc2Nyb2xsaW5nJztcclxuaW1wb3J0IHsgU21vb3RoU2Nyb2xsIH0gZnJvbSAnLi9zbW9vdGgtc2Nyb2xsJztcclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgaW1wb3J0czogW1Njcm9sbGluZ01vZHVsZV0sXHJcbiAgZGVjbGFyYXRpb25zOiBbU21vb3RoU2Nyb2xsXSxcclxuICBleHBvcnRzOiBbU21vb3RoU2Nyb2xsXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU21vb3RoU2Nyb2xsTW9kdWxlIHtcclxufVxyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBIb3N0QmluZGluZywgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENka1Njcm9sbGFibGUgfSBmcm9tICdAYW5ndWxhci9jZGsvc2Nyb2xsaW5nJztcclxuaW1wb3J0IHsgQnJlYWtwb2ludE9ic2VydmVyLCBCcmVha3BvaW50cywgQnJlYWtwb2ludFN0YXRlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2xheW91dCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCwgU3Vic2NyaXB0aW9uLCBTdWJzY3JpcHRpb25MaWtlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCwgdGFwLCB0aHJvdHRsZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFNtb290aFNjcm9sbCwgU21vb3RoU2Nyb2xsRWFzZUZ1bmMgfSBmcm9tICcuLi9zbW9vdGgtc2Nyb2xsL3Ntb290aC1zY3JvbGwnO1xyXG5cclxuaW50ZXJmYWNlIE5nU2Nyb2xsYmFyU3RhdGUge1xyXG4gIHZpZXdTdHlsZT86IHtcclxuICAgIHdpZHRoPzogc3RyaW5nO1xyXG4gICAgaGVpZ2h0Pzogc3RyaW5nO1xyXG4gICAgcGFkZGluZ1JpZ2h0Pzogc3RyaW5nO1xyXG4gICAgcGFkZGluZ0JvdHRvbT86IHN0cmluZztcclxuICB9O1xyXG4gIGRpc3BsYXlYPzogYm9vbGVhbjtcclxuICBkaXNwbGF5WT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRTdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSA9IHtcclxuICB2aWV3U3R5bGU6IHtcclxuICAgIHBhZGRpbmdSaWdodDogJzAnLFxyXG4gICAgcGFkZGluZ0JvdHRvbTogJzAnLFxyXG4gIH0sXHJcbiAgZGlzcGxheVg6IGZhbHNlLFxyXG4gIGRpc3BsYXlZOiBmYWxzZVxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICduZy1zY3JvbGxiYXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnbmctc2Nyb2xsYmFyLmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWyduZy1zY3JvbGxiYXIuc2NzcyddLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhciBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcblxyXG4gIC8qKiBIb3Jpem9udGFsIGN1c3RvbSBzY3JvbGxiYXIgKi9cclxuICBASW5wdXQoKSB0cmFja1ggPSBmYWxzZTtcclxuICAvKiogVmVydGljYWwgY3VzdG9tIFNjcm9sbGJhciAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrWSA9IHRydWU7XHJcbiAgLyoqIEF1dG8gaGlkZSBzY3JvbGxiYXJzIG9uIG1vdXNlIGxlYXZlICovXHJcbiAgQElucHV0KCkgYXV0b0hpZGUgPSBmYWxzZTtcclxuICAvKiogQXV0byB1cGRhdGUgc2Nyb2xsYmFycyBvbiBjb250ZW50IGNoYW5nZXMgKE11dGF0aW9uIE9ic2VydmVyKSAqL1xyXG4gIEBJbnB1dCgpIGF1dG9VcGRhdGUgPSB0cnVlO1xyXG4gIC8qKiBWaWV3cG9ydCBjbGFzcyAqL1xyXG4gIEBJbnB1dCgpIHZpZXdDbGFzczogc3RyaW5nO1xyXG4gIC8qKiBTY3JvbGxiYXJzIGNsYXNzICovXHJcbiAgQElucHV0KCkgYmFyQ2xhc3M6IHN0cmluZztcclxuICAvKiogU2Nyb2xsYmFycyB0aHVtYm5haWxzIGNsYXNzICovXHJcbiAgQElucHV0KCkgdGh1bWJDbGFzczogc3RyaW5nO1xyXG4gIC8qKiBUaGUgc21vb3RoIHNjcm9sbCBkdXJhdGlvbiB3aGVuIGEgc2Nyb2xsYmFyIGlzIGNsaWNrZWQgKi9cclxuICBASW5wdXQoKSBzY3JvbGxUb0R1cmF0aW9uID0gNDAwO1xyXG4gIC8qKiBVc2Ugb3ZlcmxheSBzY3JvbGxiYXJzICovXHJcbiAgQElucHV0KCkgb3ZlcmxheTogYm9vbGVhbjtcclxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFycyBvbiBzcGVjaWZpYyBicmVha3BvaW50cyAqL1xyXG4gIEBJbnB1dCgpIGRpc2FibGVPbkJyZWFrcG9pbnRzID0gW1xyXG4gICAgQnJlYWtwb2ludHMuSGFuZHNldExhbmRzY2FwZSxcclxuICAgIEJyZWFrcG9pbnRzLkhhbmRzZXRQb3J0cmFpdFxyXG4gIF07XHJcblxyXG4gIC8qKiBEaXNhYmxlIGN1c3RvbSBzY3JvbGxiYXJzIGFuZCBzd2l0Y2ggYmFjayB0byBuYXRpdmUgc2Nyb2xsYmFycyAqL1xyXG4gIEBJbnB1dCgnZGlzYWJsZWQnKSBzZXQgZGlzYWJsZVNjcm9sbGJhcnMoZGlzYWJsZTogYm9vbGVhbikge1xyXG4gICAgZGlzYWJsZSA/IHRoaXMuZGlzYWJsZSgpIDogdGhpcy5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gIEBWaWV3Q2hpbGQoQ2RrU2Nyb2xsYWJsZSkgc2Nyb2xsYWJsZTogQ2RrU2Nyb2xsYWJsZTtcclxuICBAVmlld0NoaWxkKFNtb290aFNjcm9sbCkgc21vb3RoU2Nyb2xsOiBTbW9vdGhTY3JvbGw7XHJcbiAgQFZpZXdDaGlsZCgndmVydGljYWwnLCB7cmVhZDogRWxlbWVudFJlZn0pIHZlcnRpY2FsU2Nyb2xsYmFyOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ2hvcml6b250YWwnLCB7cmVhZDogRWxlbWVudFJlZn0pIGhvcml6b250YWxTY3JvbGxiYXI6IEVsZW1lbnRSZWY7XHJcblxyXG4gIEBIb3N0QmluZGluZygnY2xhc3Mubmctc2Nyb2xsYmFyLWF1dG8taGlkZScpIGdldCBhdXRvSGlkZUNsYXNzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYXV0b0hpZGU7XHJcbiAgfVxyXG5cclxuICAvKiogTmF0aXZlIHNjcm9sbGJhciBzaXplICovXHJcbiAgcHJpdmF0ZSBfbmF0aXZlU2Nyb2xsYmFyU2l6ZTogc3RyaW5nO1xyXG5cclxuICAvKiogU2Nyb2xsYmFyIHN0YXRlICovXHJcbiAgcHJpdmF0ZSBfc3RhdGUgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE5nU2Nyb2xsYmFyU3RhdGU+KGRlZmF1bHRTdGF0ZSk7XHJcbiAgdmlld1N0eWxlOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLl9zdGF0ZS5waXBlKG1hcCgoc3RhdGU6IE5nU2Nyb2xsYmFyU3RhdGUpID0+IHN0YXRlLnZpZXdTdHlsZSkpO1xyXG4gIGRpc3BsYXlYOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0gdGhpcy5fc3RhdGUucGlwZShtYXAoKHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlKSA9PiBzdGF0ZS5kaXNwbGF5WCkpO1xyXG4gIGRpc3BsYXlZOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0gdGhpcy5fc3RhdGUucGlwZShtYXAoKHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlKSA9PiBzdGF0ZS5kaXNwbGF5WSkpO1xyXG5cclxuICAvKiogTXV0YXRpb24gb2JzZXJ2ZXIgc3Vic2NyaXB0aW9uICovXHJcbiAgcHJpdmF0ZSBfdXBkYXRlT2JzZXJ2ZXJTdWIkOiBTdWJzY3JpcHRpb25MaWtlID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xyXG4gIC8qKiBDREsgYnJlYWtwb2ludCBzdWJzY3JpcHRpb24gKi9cclxuICBwcml2YXRlIF9icmVha3BvaW50U3ViJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuICAvKiogVmlld3BvcnQgRWxlbWVudCAqL1xyXG4gIHZpZXc6IEhUTUxFbGVtZW50O1xyXG4gIC8qKiBPYnNlcnZlIGNvbnRlbnQgY2hhbmdlcyAqL1xyXG4gIHByaXZhdGUgX29ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyO1xyXG5cclxuICAvKiogU3RlYW0gdGhhdCBlbWl0cyB3aGVuIHNjcm9sbGJhciB0aHVtYm5haWwgbmVlZHMgdG8gdXBkYXRlIChmb3IgaW50ZXJuYWwgdXNlcykgKi9cclxuICBwcml2YXRlIF91cGRhdGVPYnNlcnZlciA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgdXBkYXRlT2JzZXJ2ZXIgPSB0aGlzLl91cGRhdGVPYnNlcnZlci5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBicmVha3BvaW50T2JzZXJ2ZXI6IEJyZWFrcG9pbnRPYnNlcnZlcikge1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGhpcy52aWV3ID0gdGhpcy5zY3JvbGxhYmxlLmdldEVsZW1lbnRSZWYoKS5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgIGlmICh0aGlzLmRpc2FibGVPbkJyZWFrcG9pbnRzKSB7XHJcbiAgICAgIC8vIEVuYWJsZS9EaXNhYmxlIGN1c3RvbSBzY3JvbGxiYXIgb24gYnJlYWtwb2ludHMgKFVzZWQgdG8gZGlzYWJsZSBzY3JvbGxiYXJzIG9uIG1vYmlsZSBwaG9uZXMpXHJcbiAgICAgIHRoaXMuX2JyZWFrcG9pbnRTdWIkID0gdGhpcy5icmVha3BvaW50T2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmRpc2FibGVPbkJyZWFrcG9pbnRzKS5waXBlKFxyXG4gICAgICAgIC8vIGZpbHRlcigoKSA9PiB0aGlzLnZpZXdJbml0aWFsaXplZCksXHJcbiAgICAgICAgdGFwKChyZXN1bHQ6IEJyZWFrcG9pbnRTdGF0ZSkgPT4gcmVzdWx0Lm1hdGNoZXMgPyB0aGlzLmRpc2FibGUoKSA6IHRoaXMuZW5hYmxlKCkpXHJcbiAgICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVuYWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBzdGF0ZSBvbiBjb250ZW50IGNoYW5nZXNcclxuICAgIHRoaXMuX3VwZGF0ZU9ic2VydmVyU3ViJCA9IHRoaXMudXBkYXRlT2JzZXJ2ZXIucGlwZShcclxuICAgICAgdGhyb3R0bGVUaW1lKDIwMCksXHJcbiAgICAgIHRhcCgoKSA9PiB0aGlzLnVwZGF0ZVN0YXRlKCkpXHJcbiAgICApLnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLl9icmVha3BvaW50U3ViJC51bnN1YnNjcmliZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlT2JzZXJ2ZXJTdWIkLnVuc3Vic2NyaWJlKCk7XHJcbiAgICBpZiAodGhpcy5fb2JzZXJ2ZXIpIHtcclxuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHNjcm9sbGJhciB0aHVtYm5haWwgcG9zaXRpb25cclxuICAgKi9cclxuICB1cGRhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5fdXBkYXRlT2JzZXJ2ZXIubmV4dCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW5hYmxlIGN1c3RvbSBzY3JvbGxiYXJcclxuICAgKi9cclxuICBlbmFibGUoKSB7XHJcbiAgICBpZiAodGhpcy52aWV3KSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgLy8gSGlkZSBuYXRpdmUgc2Nyb2xsYmFyc1xyXG4gICAgICB0aGlzLl9uYXRpdmVTY3JvbGxiYXJTaXplID0gYCR7dGhpcy52aWV3Lm9mZnNldFdpZHRoIC0gdGhpcy52aWV3LmNsaWVudFdpZHRoICsgMX1weGA7XHJcbiAgICAgIHRoaXMudXBkYXRlU3RhdGUoKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGUpIHtcclxuICAgICAgICAvLyBPYnNlcnZlIGNvbnRlbnQgY2hhbmdlc1xyXG4gICAgICAgIHRoaXMuX29ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gdGhpcy51cGRhdGUoKSk7XHJcbiAgICAgICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnZpZXcsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIGNoYXJhY3RlckRhdGE6IHRydWV9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyXHJcbiAgICovXHJcbiAgZGlzYWJsZSgpIHtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgLy8gU2hvdyBOYXRpdmUgU2Nyb2xsYmFyc1xyXG4gICAgdGhpcy5yZXNldFN0YXRlKCk7XHJcbiAgICBpZiAodGhpcy5fb2JzZXJ2ZXIpIHtcclxuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG8ob3B0aW9uczogU2Nyb2xsVG9PcHRpb25zKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG8ob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0VsZW1lbnQoc2VsZWN0b3I6IHN0cmluZywgb2Zmc2V0ID0gMCwgZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb0VsZW1lbnQoc2VsZWN0b3IsIG9mZnNldCwgZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFhUbyh0bzogbnVtYmVyLCBkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFhUbyh0bywgZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFlUbyh0bzogbnVtYmVyLCBkdXJhdGlvbj86IG51bWJlciwgZWFzZUZ1bmM/OiBTbW9vdGhTY3JvbGxFYXNlRnVuYyk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFlUbyh0bywgZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvVG9wKGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9Ub3AoZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvQm90dG9tKGR1cmF0aW9uPzogbnVtYmVyLCBlYXNlRnVuYz86IFNtb290aFNjcm9sbEVhc2VGdW5jKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9Cb3R0b20oZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvUmlnaHQoZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb1JpZ2h0KGR1cmF0aW9uLCBlYXNlRnVuYyk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0xlZnQoZHVyYXRpb24/OiBudW1iZXIsIGVhc2VGdW5jPzogU21vb3RoU2Nyb2xsRWFzZUZ1bmMpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb0xlZnQoZHVyYXRpb24sIGVhc2VGdW5jKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlU3RhdGUoKSB7XHJcbiAgICBsZXQgcGFkZGluZ0JvdHRvbSA9ICcwJywgcGFkZGluZ1JpZ2h0ID0gJzAnLCBkaXNwbGF5WSA9IGZhbHNlLCBkaXNwbGF5WCA9IGZhbHNlO1xyXG4gICAgY29uc3Qgc2l6ZSA9IGBjYWxjKDEwMCUgKyAke3RoaXMuX25hdGl2ZVNjcm9sbGJhclNpemV9KWA7XHJcbiAgICBpZiAodGhpcy50cmFja1kpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdmVydGljYWwgc2Nyb2xsYmFyIHNob3VsZCBiZSBkaXNwbGF5ZWRcclxuICAgICAgaWYgKHRoaXMudmlldy5zY3JvbGxIZWlnaHQgPiB0aGlzLnZpZXcuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgZGlzcGxheVkgPSB0cnVlO1xyXG4gICAgICAgIHBhZGRpbmdSaWdodCA9IHRoaXMub3ZlcmxheSA/ICcwJyA6IHRoaXMuX25hdGl2ZVNjcm9sbGJhclNpemU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnRyYWNrWCkge1xyXG4gICAgICAvLyBDaGVjayBpZiBob3Jpem9udGFsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICAgIGlmICh0aGlzLnZpZXcuc2Nyb2xsV2lkdGggPiB0aGlzLnZpZXcuY2xpZW50V2lkdGgpIHtcclxuICAgICAgICBkaXNwbGF5WCA9IHRydWU7XHJcbiAgICAgICAgcGFkZGluZ0JvdHRvbSA9IHRoaXMub3ZlcmxheSA/ICcwJyA6IHRoaXMuX25hdGl2ZVNjcm9sbGJhclNpemU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3N0YXRlLm5leHQoe1xyXG4gICAgICB2aWV3U3R5bGU6IHtcclxuICAgICAgICB3aWR0aDogc2l6ZSxcclxuICAgICAgICBoZWlnaHQ6IHNpemUsXHJcbiAgICAgICAgcGFkZGluZ0JvdHRvbSxcclxuICAgICAgICBwYWRkaW5nUmlnaHRcclxuICAgICAgfSxcclxuICAgICAgZGlzcGxheVgsXHJcbiAgICAgIGRpc3BsYXlZXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRTdGF0ZSgpIHtcclxuICAgIHRoaXMuX3N0YXRlLm5leHQoe1xyXG4gICAgICB2aWV3U3R5bGU6IHtcclxuICAgICAgICAuLi50aGlzLl9zdGF0ZS52YWx1ZS52aWV3U3R5bGUsXHJcbiAgICAgICAgLi4uZGVmYXVsdFN0YXRlLnZpZXdTdHlsZVxyXG4gICAgICB9LFxyXG4gICAgICBkaXNwbGF5WDogZGVmYXVsdFN0YXRlLmRpc3BsYXlYLFxyXG4gICAgICBkaXNwbGF5WTogZGVmYXVsdFN0YXRlLmRpc3BsYXlZXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5qZWN0LFxuICBBZnRlclZpZXdJbml0LFxuICBPbkRlc3Ryb3ksXG4gIElucHV0LFxuICBWaWV3Q2hpbGQsXG4gIE5nWm9uZSxcbiAgRWxlbWVudFJlZixcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIGZvcndhcmRSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBmcm9tRXZlbnQsIE9ic2VydmFibGUsIEJlaGF2aW9yU3ViamVjdCwgU3Vic2NyaXB0aW9uLCBTdWJzY3JpcHRpb25MaWtlLCBhbmltYXRpb25GcmFtZVNjaGVkdWxlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCB0aHJvdHRsZVRpbWUsIG1lcmdlTWFwLCBwbHVjaywgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBOZ1Njcm9sbGJhciB9IGZyb20gJy4vbmctc2Nyb2xsYmFyJztcblxuaW50ZXJmYWNlIEF4aXNQcm9wZXJ0aWVzIHtcbiAgb2Zmc2V0WU9yWDogc3RyaW5nO1xuICBzY3JvbGxUb3BMZWZ0OiBzdHJpbmc7XG4gIGNsaWVudFlPclg6IHN0cmluZztcbiAgdG9wT3JMZWZ0OiBzdHJpbmc7XG4gIGNsaWVudEhlaWdodE9yV2lkdGg6IHN0cmluZztcbiAgc2Nyb2xsSGVpZ2h0T3JXaWR0aDogc3RyaW5nO1xuICBoZWlnaHRPcldpZHRoOiBzdHJpbmc7XG4gIHRyYW5zZm9ybTogKHZhbDogbnVtYmVyKSA9PiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBeGlzIHtcbiAgdmVydGljYWw6IEF4aXNQcm9wZXJ0aWVzO1xuICBob3Jpem9udGFsOiBBeGlzUHJvcGVydGllcztcbn1cblxuY29uc3QgYXhpczogQXhpcyA9IHtcbiAgdmVydGljYWw6IHtcbiAgICB0b3BPckxlZnQ6ICd0b3AnLFxuICAgIG9mZnNldFlPclg6ICdvZmZzZXRZJyxcbiAgICBjbGllbnRZT3JYOiAnY2xpZW50WScsXG4gICAgaGVpZ2h0T3JXaWR0aDogJ2hlaWdodCcsXG4gICAgc2Nyb2xsVG9wTGVmdDogJ3Njcm9sbFRvcCcsXG4gICAgY2xpZW50SGVpZ2h0T3JXaWR0aDogJ2NsaWVudEhlaWdodCcsXG4gICAgc2Nyb2xsSGVpZ2h0T3JXaWR0aDogJ3Njcm9sbEhlaWdodCcsXG4gICAgdHJhbnNmb3JtOiAodmFsOiBudW1iZXIpID0+IGB0cmFuc2xhdGUzZCgwLCAke3ZhbH1weCwgMClgXG4gIH0sXG4gIGhvcml6b250YWw6IHtcbiAgICB0b3BPckxlZnQ6ICdsZWZ0JyxcbiAgICBvZmZzZXRZT3JYOiAnb2Zmc2V0WCcsXG4gICAgY2xpZW50WU9yWDogJ2NsaWVudFgnLFxuICAgIGhlaWdodE9yV2lkdGg6ICd3aWR0aCcsXG4gICAgc2Nyb2xsVG9wTGVmdDogJ3Njcm9sbExlZnQnLFxuICAgIGNsaWVudEhlaWdodE9yV2lkdGg6ICdjbGllbnRXaWR0aCcsXG4gICAgc2Nyb2xsSGVpZ2h0T3JXaWR0aDogJ3Njcm9sbFdpZHRoJyxcbiAgICB0cmFuc2Zvcm06ICh2YWw6IG51bWJlcikgPT4gYHRyYW5zbGF0ZTNkKCR7dmFsfXB4LCAwLCAwKWBcbiAgfVxufTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmctc2Nyb2xsYmFyLXRodW1iJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiAjYmFyIGNsYXNzPVwibmctc2Nyb2xsYmFyIG5nLXNjcm9sbGJhci17e29yaWVudGF0aW9ufX0ge3tiYXJDbGFzc319XCIgKG1vdXNlZG93bik9XCJvblNjcm9sbGJhckNsaWNrKCRldmVudClcIj5cbiAgICAgIDxkaXYgI3RodW1iIGNsYXNzPVwibmctc2Nyb2xsYmFyLXRodW1iIHt7dGh1bWJDbGFzc319XCIgW25nU3R5bGVdPVwic2Nyb2xsYmFyU3R5bGUgfCBhc3luY1wiPjwvZGl2PlxuICAgIDwvZGl2PlxuICBgXG59KVxuZXhwb3J0IGNsYXNzIE5nU2Nyb2xsYmFyVGh1bWIgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuXG4gIC8qKiBTY3JvbGxiYXIgY2xhc3MgKi9cbiAgQElucHV0KCkgYmFyQ2xhc3M6IHN0cmluZztcbiAgLyoqIFNjcm9sbGJhciB0aHVtYm5haWwgY2xhc3MgKi9cbiAgQElucHV0KCkgdGh1bWJDbGFzczogc3RyaW5nO1xuICAvKiogVGhlIHNjcm9sbCBkdXJhdGlvbiB3aGVuIHNjcm9sbGJhciAobm90IHRoZSB0aHVtYm5haWwpIGlzIGNsaWNrZWQgKi9cbiAgQElucHV0KCkgc2Nyb2xsVG9EdXJhdGlvbjogbnVtYmVyO1xuICAvKiogU2Nyb2xsYmFyIG9yaWVudGF0aW9uICovXG4gIEBJbnB1dCgpIG9yaWVudGF0aW9uOiAndmVydGljYWwnIHwgJ2hvcml6b250YWwnO1xuXG4gIEBWaWV3Q2hpbGQoJ2JhcicpIGJhcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgndGh1bWInKSB0aHVtYjogRWxlbWVudFJlZjtcblxuICBwcml2YXRlIF9taW5UaHVtYlNpemUgPSAyMDtcbiAgcHJpdmF0ZSBfbmF0dXJhbFRodW1iU2l6ZSA9IDA7XG4gIHByaXZhdGUgX3RodW1iU2l6ZSA9IDA7XG4gIHByaXZhdGUgX3RyYWNrTWF4ID0gMDtcbiAgcHJpdmF0ZSBfc2Nyb2xsTWF4ID0gMDtcbiAgcHJpdmF0ZSBfY3VyclBvcyA9IDA7XG4gIHByaXZhdGUgX3Njcm9sbCQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XG4gIHByaXZhdGUgX3RodW1iRHJhZyQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XG4gIHByaXZhdGUgX3VwZGF0ZU9ic2VydmVyJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgcHJpdmF0ZSBfdmlldzogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3N0YXRlID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KHtcbiAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLCAwLCAwKSdcbiAgfSk7XG5cbiAgLyoqIFNjcm9sbGJhciBzdHlsZXMgKi9cbiAgc2Nyb2xsYmFyU3R5bGUgPSB0aGlzLl9zdGF0ZS5hc09ic2VydmFibGUoKTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwcm9wZXIgcHJvcGVydGllcyBmb3Igc2Nyb2xsYmFyIG9yaWVudGF0aW9uXG4gICAqL1xuICBnZXQgYXhpcygpOiBBeGlzUHJvcGVydGllcyB7XG4gICAgcmV0dXJuIGF4aXNbdGhpcy5vcmllbnRhdGlvbl07XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHNjcm9sbGJhciB0aHVtYm5haWwgc2l6ZVxuICAgKi9cbiAgZ2V0IHRodW1iU2l6ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IHNjcm9sbEJhckNsaWVudEhlaWdodE9yV2lkdGggPSB0aGlzLmJhci5uYXRpdmVFbGVtZW50W3RoaXMuYXhpcy5jbGllbnRIZWlnaHRPcldpZHRoXTtcbiAgICBjb25zdCB2aWV3Q2xpZW50SGVpZ2h0T3JXaWR0aCA9IHRoaXMuX3ZpZXdbdGhpcy5heGlzLmNsaWVudEhlaWdodE9yV2lkdGhdO1xuICAgIGNvbnN0IHZpZXdTY3JvbGxIZWlnaHRPcldpZHRoID0gdGhpcy5fdmlld1t0aGlzLmF4aXMuc2Nyb2xsSGVpZ2h0T3JXaWR0aF07XG4gICAgdGhpcy5fbmF0dXJhbFRodW1iU2l6ZSA9IHNjcm9sbEJhckNsaWVudEhlaWdodE9yV2lkdGggLyB2aWV3U2Nyb2xsSGVpZ2h0T3JXaWR0aCAqIHNjcm9sbEJhckNsaWVudEhlaWdodE9yV2lkdGg7XG4gICAgdGhpcy5fc2Nyb2xsTWF4ID0gdmlld1Njcm9sbEhlaWdodE9yV2lkdGggLSB2aWV3Q2xpZW50SGVpZ2h0T3JXaWR0aDtcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxCb3VuZGFyaWVzKHRoaXMuX25hdHVyYWxUaHVtYlNpemUsIHRoaXMuX3Njcm9sbE1heCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHpvbmU6IE5nWm9uZSxcbiAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2N1bWVudDogYW55LFxuICAgICAgICAgICAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gTmdTY3JvbGxiYXIpKSBwcml2YXRlIG5nU2Nyb2xsYmFyOiBOZ1Njcm9sbGJhcikge1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMuX3ZpZXcgPSB0aGlzLm5nU2Nyb2xsYmFyLnNjcm9sbGFibGUuZ2V0RWxlbWVudFJlZigpLm5hdGl2ZUVsZW1lbnQ7XG4gICAgLy8gU3RhcnQgdmlldyBzY3JvbGwgZXZlbnRcbiAgICB0aGlzLl9zY3JvbGwkID0gdGhpcy5uZ1Njcm9sbGJhci5zY3JvbGxhYmxlLmVsZW1lbnRTY3JvbGxlZCgpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlU2Nyb2xsYmFyKCkpO1xuXG4gICAgLy8gU3RhcnQgc2Nyb2xsYmFyIHRodW1ibmFpbCBkcmFnIGV2ZW50c1xuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PlxuICAgICAgdGhpcy5fdGh1bWJEcmFnJCA9IHRoaXMuc3RhcnRUaHVtYkV2ZW50cygpLnN1YnNjcmliZSgpXG4gICAgKTtcblxuICAgIC8vIFVwZGF0ZSBzY3JvbGxiYXIgdGh1bWJuYWlsIHNpemUgb24gY29udGVudCBjaGFuZ2VzXG4gICAgdGhpcy5fdXBkYXRlT2JzZXJ2ZXIkID0gdGhpcy5uZ1Njcm9sbGJhci51cGRhdGVPYnNlcnZlci5waXBlKFxuICAgICAgdGhyb3R0bGVUaW1lKDIwMCksXG4gICAgICB0YXAoKCkgPT4gdGhpcy51cGRhdGVTY3JvbGxiYXIoKSksXG4gICAgICAvLyBNYWtlIHN1cmUgc2Nyb2xsYmFyIHRodW1ibmFpbCBwb3NpdGlvbiBpcyBjb3JyZWN0IGFmdGVyIHRoZSBuZXcgY29udGVudCBpcyByZW5kZXJlZFxuICAgICAgZGVib3VuY2VUaW1lKDIwMCksXG4gICAgICB0YXAoKCkgPT4gdGhpcy51cGRhdGVTY3JvbGxiYXIoKSksXG4gICAgKS5zdWJzY3JpYmUoKTtcblxuICAgIC8vIEluaXRpYWxpemUgc2Nyb2xsYmFyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpLCAyMDApO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5fc2Nyb2xsJC51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuX3RodW1iRHJhZyQudW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLl91cGRhdGVPYnNlcnZlciQudW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGxiYXIgY2xpY2tcbiAgICogQHBhcmFtIGUgTW91c2UgZXZlbnRcbiAgICovXG4gIG9uU2Nyb2xsYmFyQ2xpY2soZTogYW55KSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGNvbnN0IG9mZnNldFlPclggPSBlW3RoaXMuYXhpcy5vZmZzZXRZT3JYXSAtIHRoaXMuX25hdHVyYWxUaHVtYlNpemUgKiAuNTtcbiAgICAgIGNvbnN0IHRodW1iUG9zaXRpb25QZXJjZW50YWdlID0gb2Zmc2V0WU9yWCAqIDEwMCAvIHRoaXMuYmFyLm5hdGl2ZUVsZW1lbnRbdGhpcy5heGlzLmNsaWVudEhlaWdodE9yV2lkdGhdO1xuICAgICAgY29uc3QgdmFsdWUgPSB0aHVtYlBvc2l0aW9uUGVyY2VudGFnZSAqIHRoaXMuX3ZpZXdbdGhpcy5heGlzLnNjcm9sbEhlaWdodE9yV2lkdGhdIC8gMTAwO1xuICAgICAgdGhpcy5uZ1Njcm9sbGJhci5zY3JvbGxUbyh7W3RoaXMuYXhpcy50b3BPckxlZnRdOiB2YWx1ZSwgZHVyYXRpb246IHRoaXMuc2Nyb2xsVG9EdXJhdGlvbn0gYXMgYW55KS5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNjcm9sbGJhclxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTY3JvbGxiYXIoKSB7XG4gICAgdGhpcy5fdGh1bWJTaXplID0gdGhpcy50aHVtYi5uYXRpdmVFbGVtZW50W3RoaXMuYXhpcy5jbGllbnRIZWlnaHRPcldpZHRoXTtcbiAgICB0aGlzLl90cmFja01heCA9IHRoaXMuYmFyLm5hdGl2ZUVsZW1lbnRbdGhpcy5heGlzLmNsaWVudEhlaWdodE9yV2lkdGhdIC0gdGhpcy5fdGh1bWJTaXplO1xuICAgIHRoaXMuX2N1cnJQb3MgPSB0aGlzLl92aWV3W3RoaXMuYXhpcy5zY3JvbGxUb3BMZWZ0XSAqIHRoaXMuX3RyYWNrTWF4IC8gdGhpcy5fc2Nyb2xsTWF4O1xuICAgIHRoaXMuem9uZS5ydW4oKCkgPT5cbiAgICAgIGFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyLnNjaGVkdWxlKCgpID0+XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUoe1xuICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy5heGlzLnRyYW5zZm9ybSh0aGlzLl9jdXJyUG9zKSxcbiAgICAgICAgICBbdGhpcy5heGlzLmhlaWdodE9yV2lkdGhdOiBgJHt0aGlzLnRodW1iU2l6ZX1weGBcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHZlcnRpY2FsIHRodW1iIHdvcmtlclxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydFRodW1iRXZlbnRzKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgY29uc3QgbW91c2VEb3duJCA9IGZyb21FdmVudCh0aGlzLnRodW1iLm5hdGl2ZUVsZW1lbnQsICdtb3VzZWRvd24nKTtcbiAgICBjb25zdCBtb3VzZU1vdmUkID0gZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdtb3VzZW1vdmUnKTtcbiAgICBjb25zdCBtb3VzZVVwJCA9IGZyb21FdmVudCh0aGlzLmRvY3VtZW50LCAnbW91c2V1cCcpLnBpcGUoXG4gICAgICB0YXAoKCkgPT4gdGhpcy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gbnVsbClcbiAgICApO1xuICAgIHJldHVybiBtb3VzZURvd24kLnBpcGUoXG4gICAgICB0YXAoKCkgPT4ge1xuICAgICAgICB0aGlzLmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSAoKSA9PiBmYWxzZTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0cmFja01heCBmb3IgYmVmb3JlIHN0YXJ0IGRyYWdnaW5nXG4gICAgICAgIHRoaXMuX3RyYWNrTWF4ID0gdGhpcy5iYXIubmF0aXZlRWxlbWVudFt0aGlzLmF4aXMuY2xpZW50SGVpZ2h0T3JXaWR0aF0gLSB0aGlzLl90aHVtYlNpemU7XG4gICAgICB9KSxcbiAgICAgIHBsdWNrKHRoaXMuYXhpcy5vZmZzZXRZT3JYKSxcbiAgICAgIG1lcmdlTWFwKChtb3VzZURvd25PZmZzZXQ6IG51bWJlcikgPT4gbW91c2VNb3ZlJC5waXBlKFxuICAgICAgICB0YWtlVW50aWwobW91c2VVcCQpLFxuICAgICAgICBwbHVjayh0aGlzLmF4aXMuY2xpZW50WU9yWCksXG4gICAgICAgIHRhcCgobW91c2VNb3ZlQ2xpZW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBvZmZzZXRZT3JYID0gbW91c2VNb3ZlQ2xpZW50IC0gdGhpcy5iYXIubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLmF4aXMudG9wT3JMZWZ0XTtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX3Njcm9sbE1heCAqIChvZmZzZXRZT3JYIC0gbW91c2VEb3duT2Zmc2V0KSAvIHRoaXMuX3RyYWNrTWF4O1xuICAgICAgICAgIHRoaXMubmdTY3JvbGxiYXIuc2Nyb2xsYWJsZS5zY3JvbGxUbyh7W3RoaXMuYXhpcy50b3BPckxlZnRdOiB2YWx1ZX0pO1xuICAgICAgICB9KVxuICAgICAgKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzY3JvbGxiYXIgdGh1bWIgc2l6ZVxuICAgKiBAcGFyYW0gbmF0dXJhbFRodW1iU2l6ZVxuICAgKiBAcGFyYW0gc2Nyb2xsTWF4XG4gICAqL1xuICBwcml2YXRlIHNjcm9sbEJvdW5kYXJpZXMobmF0dXJhbFRodW1iU2l6ZTogbnVtYmVyLCBzY3JvbGxNYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIChuYXR1cmFsVGh1bWJTaXplIDwgdGhpcy5fbWluVGh1bWJTaXplKSA/IHRoaXMuX21pblRodW1iU2l6ZSA6IHNjcm9sbE1heCA/IG5hdHVyYWxUaHVtYlNpemUgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZShzdGF0ZTogYW55KSB7XG4gICAgdGhpcy5fc3RhdGUubmV4dCh7Li4udGhpcy5fc3RhdGUudmFsdWUsIC4uLnN0YXRlfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IFNjcm9sbGluZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9zY3JvbGxpbmcnO1xyXG5pbXBvcnQgeyBMYXlvdXRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jZGsvbGF5b3V0JztcclxuaW1wb3J0IHsgU21vb3RoU2Nyb2xsTW9kdWxlIH0gZnJvbSAnLi4vc21vb3RoLXNjcm9sbC9zbW9vdGgtc2Nyb2xsLm1vZHVsZSc7XHJcbmltcG9ydCB7IE5nU2Nyb2xsYmFyIH0gZnJvbSAnLi9uZy1zY3JvbGxiYXInO1xyXG5pbXBvcnQgeyBOZ1Njcm9sbGJhclRodW1iIH0gZnJvbSAnLi9uZy1zY3JvbGxiYXItdGh1bWInO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbXHJcbiAgICBDb21tb25Nb2R1bGUsXHJcbiAgICBTY3JvbGxpbmdNb2R1bGUsXHJcbiAgICBTbW9vdGhTY3JvbGxNb2R1bGUsXHJcbiAgICBMYXlvdXRNb2R1bGVcclxuICBdLFxyXG4gIGRlY2xhcmF0aW9uczogW1xyXG4gICAgTmdTY3JvbGxiYXIsXHJcbiAgICBOZ1Njcm9sbGJhclRodW1iXHJcbiAgXSxcclxuICBleHBvcnRzOiBbXHJcbiAgICBOZ1Njcm9sbGJhclxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE5nU2Nyb2xsYmFyTW9kdWxlIHtcclxufVxyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0lBOEJFLHNCQUFZLEVBQWM7UUFDeEIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsYUFB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